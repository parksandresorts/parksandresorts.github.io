"use strict";(self.webpackChunk_parksandresorts_core=self.webpackChunk_parksandresorts_core||[]).push([[2762],{"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/postcss-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/components/forms/image-field/image-field.module.less":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".image-field-module--image-field--Ibz6G {\n  margin: 1rem 0 2rem;\n}\n.image-field-module--upload-container--jZQRb {\n  margin: 0.5rem 0 0.5rem;\n  width: 100%;\n  padding: 1rem 1rem 1.5rem;\n  border-radius: 0.5rem;\n  display: flex;\n  justify-content: center;\n  box-shadow: 0 2px 8px 0 rgba(0, 102, 73, 0.06);\n  cursor: pointer;\n  align-items: center;\n  background: transparent;\n  background: var(--step-backdrop-bkg);\n  border: 2px dashed var(--text-color-25);\n}\n.image-field-module--upload-container--jZQRb input {\n  display: none;\n}\n.image-field-module--upload-container--jZQRb .image-field-module--information--bsofd {\n  padding-bottom: 1rem;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n.image-field-module--base64Image--bdRvn {\n  display: none;\n}\n.image-field-module--required--WYzqy {\n  font-size: 0.875rem;\n  text-transform: capitalize;\n  margin-bottom: 0.25rem;\n  opacity: 0.6;\n}\n.image-field-module--profile-image--szMLc {\n  height: 8rem;\n  width: 8rem;\n  border-radius: 50%;\n  background-size: cover;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 1rem;\n}\n.image-field-module--info-button-wrapper--ZoUzM {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.image-field-module--image-change-image-wrapper--tj1ju {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.image-field-module--field-label--U5bak {\n  display: inline-block;\n  width: 100%;\n  padding: 0 0 0.25rem 0;\n  font-weight: bold;\n  letter-spacing: 0.5px;\n  text-align: left;\n}\n.image-field-module--required-label--nfC_U {\n  font-weight: 400;\n  opacity: 0.6;\n  margin-left: 0.25rem;\n  text-transform: lowercase;\n}\n.image-field-module--selected-profile-image-heading--brZ_h {\n  margin: 0.25rem 0 1rem;\n  color: var(--component-selected-profile-heading);\n}\n.image-field-module--icon-wrapper--CVdga {\n  width: 4.5rem;\n  height: 4.5rem;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.image-field-module--helper-text--eS2yg {\n  color: var(--natural-600);\n  margin: 0.5rem 0;\n}\n","",{version:3,sources:["webpack://./src/components/forms/image-field/image-field.module.less"],names:[],mappings:"AAEA;EACE,mBAAA;AADF;AAIA;EACE,uBAAA;EACA,WAAA;EACA,yBAAA;EACA,qBAAA;EACA,aAAA;EAEA,uBAAA;EACA,8CAAA;EACA,eAAA;EACA,mBAAA;EACA,uBAAA;EACA,oCAAA;EACA,uCAAA;AAHF;AAVA;EAgBI,aAAA;AAHJ;AAbA;EAmBI,oBAAA;EACA,OAAA;EACA,aAAA;EACA,sBAAA;AAHJ;AAOA;EACE,aAAA;AALF;AAQA;EACE,mBAAA;EACA,0BAAA;EACA,sBAAA;EACA,YAAA;AANF;AASA;EACE,YAAA;EACA,WAAA;EACA,kBAAA;EACA,sBAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,mBAAA;AAPF;AAUA;EACE,aAAA;EACA,sBAAA;EACA,uBAAA;EACA,mBAAA;AARF;AAWA;EACE,aAAA;EACA,sBAAA;EACA,mBAAA;EACA,uBAAA;AATF;AAYA;EACE,qBAAA;EACA,WAAA;EACA,sBAAA;EACA,iBAAA;EACA,qBAAA;EACA,gBAAA;AAVF;AAaA;EACE,gBAAA;EACA,YAAA;EACA,oBAAA;EACA,yBAAA;AAXF;AAcA;EACE,sBAAA;EACA,gDAAA;AAZF;AAeA;EACE,aAAA;EACA,cAAA;EACA,kBAAA;EACA,aAAA;EACA,uBAAA;EACA,mBAAA;AAbF;AAgBA;EACE,yBAAA;EACA,gBAAA;AAdF",sourcesContent:['@import "../../../styling/break-points.less";\n\n.image-field {\n  margin: 1rem 0 2rem;\n}\n\n.upload-container {\n  margin: 0.5rem 0 0.5rem;\n  width: 100%;\n  padding: 1rem 1rem 1.5rem;\n  border-radius: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 8px 0 rgba(0, 102, 73, 0.06);\n  cursor: pointer;\n  align-items: center;\n  background: transparent;\n  background: var(--step-backdrop-bkg);\n  border: 2px dashed var(--text-color-25);\n\n  input {\n    display: none;\n  }\n  .information {\n    padding-bottom: 1rem;\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n  }\n}\n\n.base64Image {\n  display: none;\n}\n\n.required {\n  font-size: 0.875rem;\n  text-transform: capitalize;\n  margin-bottom: 0.25rem;\n  opacity: 0.6;\n}\n\n.profile-image {\n  height: 8rem;\n  width: 8rem;\n  border-radius: 50%;\n  background-size: cover;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 1rem;\n}\n\n.info-button-wrapper {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\n.image-change-image-wrapper {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.field-label {\n  display: inline-block;\n  width: 100%;\n  padding: 0 0 0.25rem 0;\n  font-weight: bold;\n  letter-spacing: 0.5px;\n  text-align: left;\n}\n\n.required-label {\n  font-weight: 400;\n  opacity: 0.6;\n  margin-left: 0.25rem;\n  text-transform: lowercase;\n}\n\n.selected-profile-image-heading {\n  margin: 0.25rem 0 1rem;\n  color: var(--component-selected-profile-heading);\n}\n\n.icon-wrapper {\n  width: 4.5rem;\n  height: 4.5rem;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.helper-text {\n  color: var(--natural-600);\n  margin: 0.5rem 0;\n}\n'],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={"image-field":"image-field-module--image-field--Ibz6G",imageField:"image-field-module--image-field--Ibz6G","upload-container":"image-field-module--upload-container--jZQRb",uploadContainer:"image-field-module--upload-container--jZQRb",information:"image-field-module--information--bsofd",base64Image:"image-field-module--base64Image--bdRvn",required:"image-field-module--required--WYzqy","profile-image":"image-field-module--profile-image--szMLc",profileImage:"image-field-module--profile-image--szMLc","info-button-wrapper":"image-field-module--info-button-wrapper--ZoUzM",infoButtonWrapper:"image-field-module--info-button-wrapper--ZoUzM","image-change-image-wrapper":"image-field-module--image-change-image-wrapper--tj1ju",imageChangeImageWrapper:"image-field-module--image-change-image-wrapper--tj1ju","field-label":"image-field-module--field-label--U5bak",fieldLabel:"image-field-module--field-label--U5bak","required-label":"image-field-module--required-label--nfC_U",requiredLabel:"image-field-module--required-label--nfC_U","selected-profile-image-heading":"image-field-module--selected-profile-image-heading--brZ_h",selectedProfileImageHeading:"image-field-module--selected-profile-image-heading--brZ_h","icon-wrapper":"image-field-module--icon-wrapper--CVdga",iconWrapper:"image-field-module--icon-wrapper--CVdga","helper-text":"image-field-module--helper-text--eS2yg",helperText:"image-field-module--helper-text--eS2yg"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/components/forms/image-field/image-field.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>image_field_stories});var react=__webpack_require__("./node_modules/react/index.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),image_field_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/postcss-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/components/forms/image-field/image-field.module.less"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(image_field_module.Z,options);const image_field_image_field_module=image_field_module.Z&&image_field_module.Z.locals?image_field_module.Z.locals:void 0;var prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),parks_button=__webpack_require__("./src/components/shared-components/parks-button/parks-button.tsx"),icon=__webpack_require__("./src/components/elements/icon/icon.tsx"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),ImageField=function ImageField(_ref){var formField=_ref.formField,onUserChanged=_ref.onUserChanged,isRequired=_ref.isRequired,label=_ref.label,helperText=_ref.helperText,fileInput=(0,react.useRef)(null),t=(0,es.$G)().t;formField&&(isRequired=isRequired||formField.isRequired,label=label||formField.label,helperText=helperText||formField.helperText);var base64Image=formField.value;base64Image&&-1===base64Image.indexOf("base64,")&&(base64Image="data:image;base64,".concat(base64Image));var getBackgroundImage=function getBackgroundImage(){return base64Image?"url(".concat(base64Image,") no-repeat center / cover"):null};return(0,jsx_runtime.jsxs)("div",{className:image_field_image_field_module.imageField,children:[(0,jsx_runtime.jsxs)("label",{className:image_field_image_field_module.fieldLabel,children:[label,isRequired&&(0,jsx_runtime.jsxs)("span",{className:image_field_image_field_module.requiredLabel,children:["(",t("mandatory"),")"]})]}),(0,jsx_runtime.jsxs)("div",{role:"button","aria-pressed":"false",tabIndex:0,className:image_field_image_field_module.uploadContainer,onClick:function triggerUpload(){fileInput.current.click()},children:[(0,jsx_runtime.jsx)("input",{onChange:function handleBase64Image(event){if(event.target.files&&event.target.files[0]){var canvas=document.getElementById("base64Image"),context=canvas.getContext("2d"),fileReader=new FileReader;fileReader.addEventListener("load",(function(evt){var img=new Image;img.addEventListener("load",(function(){img.width>img.height?(canvas.width=Math.min(img.width,750),canvas.height=Math.round(canvas.width*(img.height/img.width))):(canvas.height=Math.min(img.height,750),canvas.width=Math.round(canvas.height*(img.width/img.height))),context.clearRect(0,0,context.canvas.width,context.canvas.height),context.drawImage(img,0,0,canvas.width,canvas.height);var base64Url=canvas.toDataURL("image/jpeg",.75),output=base64Url.replace(/^data:image\/jpe?g;base64,/,"");onUserChanged(formField.name,output),context.clearRect(0,0,context.canvas.width,context.canvas.height),canvas.height=0,canvas.width=0,base64Url=null})),img.src=evt.target.result})),fileReader.readAsDataURL(event.target.files[0])}},ref:fileInput,type:"file"}),(0,jsx_runtime.jsx)("canvas",{className:image_field_image_field_module.base64Image,id:"base64Image"}),getBackgroundImage()?(0,jsx_runtime.jsxs)("div",{className:image_field_image_field_module.imageChangeImageWrapper,children:[(0,jsx_runtime.jsx)("h5",{className:image_field_image_field_module.selectedProfileImageHeading,children:t("imageChosen")}),(0,jsx_runtime.jsx)("div",{className:image_field_image_field_module.profileImage,style:{background:getBackgroundImage()}}),(0,jsx_runtime.jsx)(parks_button.f5,{label:t("imageChange")})]}):(0,jsx_runtime.jsxs)("div",{className:image_field_image_field_module.infoButtonWrapper,children:[(0,jsx_runtime.jsx)("div",{className:image_field_image_field_module.iconWrapper,children:(0,jsx_runtime.jsx)(icon.Z,{name:"file-upload",size:"xxl"})}),(0,jsx_runtime.jsx)(parks_button.f5,{label:t("imageIDUpload")})]})]}),helperText&&(0,jsx_runtime.jsx)("p",{className:[image_field_image_field_module.helperText,"body-s"].join(" "),children:helperText})]})};ImageField.displayName="ImageField";const image_field=ImageField;ImageField.propTypes={previewImageUrl:prop_types_default().string,onUserChanged:prop_types_default().func,imageField:prop_types_default().object,label:prop_types_default().string};try{imagefield.displayName="imagefield",imagefield.__docgenInfo={description:"",displayName:"imagefield",props:{formField:{defaultValue:null,description:"",name:"formField",required:!0,type:{name:"FormField"}},onUserChanged:{defaultValue:null,description:"",name:"onUserChanged",required:!0,type:{name:"CallableFunction"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},helperText:{defaultValue:null,description:"",name:"helperText",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/forms/image-field/image-field.tsx#imagefield"]={docgenInfo:imagefield.__docgenInfo,name:"imagefield",path:"src/components/forms/image-field/image-field.tsx#imagefield"})}catch(__react_docgen_typescript_loader_error){}var form_builder=__webpack_require__("./src/helpers/form-builder.ts");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const image_field_stories={title:"Elements/Input Fields/ImageField",component:image_field};var initialForm={fields:(new Map).set("image",(0,form_builder.DM)("image",{label:"Ansiktsbild för identifiering",type:"IMAGE_FIELD",helperText:"OBS! Krävs en tydlig ansiktsbild så att vi kan identifiera dig vid entrén",isRequired:!0}))},Primary={render:function render(args){var _useForm2=_slicedToArray((0,form_builder.cI)(initialForm),5),form=_useForm2[0],handleFieldOnChange=(_useForm2[1],_useForm2[2]);_useForm2[3],_useForm2[4];return(0,jsx_runtime.jsx)(image_field,{formField:form.fields.get("image"),onUserChanged:handleFieldOnChange})}},__namedExportsOrder=["Primary"];Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:'{\n  render: args => {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const [form, isFormvalid, handleFieldOnChange, setForm, validateForm] = useForm(initialForm);\n    return <ImageField formField={form.fields.get("image")!} onUserChanged={handleFieldOnChange} />;\n  }\n}',...Primary.parameters?.docs?.source}}}}}]);