/*! For license information please see components-hocs-page-lock-page-lock-stories.e975fbeb.iframe.bundle.js.LICENSE.txt */
(self.webpackChunk_parksandresorts_core=self.webpackChunk_parksandresorts_core||[]).push([[7871],{"./src/components/elements/loading-block/loading-block.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>LoadingBlock});var injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),loading_block_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/postcss-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/components/elements/loading-block/loading-block.module.less"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(loading_block_module.Z,options);const loading_block_loading_block_module=loading_block_module.Z&&loading_block_module.Z.locals?loading_block_module.Z.locals:void 0;var string_helper=__webpack_require__("./src/helpers/string-helper.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),LoadingBlock=function LoadingBlock(_ref){var className=_ref.className;return(0,jsx_runtime.jsx)("div",{className:(0,string_helper.JC)(loading_block_loading_block_module.loaderIcon,className),children:(0,jsx_runtime.jsx)("svg",{style:{shapeRendering:"auto"},width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:(0,jsx_runtime.jsx)("path",{fill:"none",strokeWidth:"6",strokeDasharray:"161.65102478027345 94.9379034423828",d:"M24.3 30C11.4 30 5 43.3 5 50s6.4 20 19.3 20c19.3 0 32.1-40 51.4-40 C88.6 30 95 43.3 95 50s-6.4 20-19.3 20C56.4 70 43.6 30 24.3 30z",strokeLinecap:"round",style:{transform:"scale(0.6900000000000001)",transformOrigin:"50px 50px"},children:(0,jsx_runtime.jsx)("animate",{attributeName:"stroke-dashoffset",repeatCount:"indefinite",dur:"2.1739130434782608s",keyTimes:"0;1",values:"0;256.58892822265625"})})})})};LoadingBlock.displayName="LoadingBlock";try{LoadingBlock.displayName="LoadingBlock",LoadingBlock.__docgenInfo={description:"",displayName:"LoadingBlock",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/elements/loading-block/loading-block.tsx#LoadingBlock"]={docgenInfo:LoadingBlock.__docgenInfo,name:"LoadingBlock",path:"src/components/elements/loading-block/loading-block.tsx#LoadingBlock"})}catch(__react_docgen_typescript_loader_error){}},"./src/helpers/local-storage-helper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _date_helper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/date-helper.ts");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:String(i)}const __WEBPACK_DEFAULT_EXPORT__=new(function(){function LocalStorageHelper(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LocalStorageHelper)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(LocalStorageHelper,[{key:"isLocalStorageAvailable",value:function isLocalStorageAvailable(){try{localStorage.isAvailable=!0}catch(e){return!1}return"undefined"!=typeof window}},{key:"setItem",value:function setItem(key,value,timestamp){this.isLocalStorageAvailable()&&key&&value&&(timestamp&&(value={value,localStorageItemValidUntil:timestamp}),"object"===_typeof(value)&&(value=JSON.stringify(value)),localStorage.setItem(key,value))}},{key:"isTimeStampValid",value:function isTimeStampValid(timestamp){return!_date_helper__WEBPACK_IMPORTED_MODULE_0__.ZP.hasDatePassed(timestamp)}},{key:"getItem",value:function getItem(key){if(this.isLocalStorageAvailable()){var value=localStorage.getItem(key);if(value)return"{"!==value[0]&&"["!==value[0]||(value=JSON.parse(value)),value&&!value.localStorageItemValidUntil?value:this.valueTimeStampValidation(value,key)}}},{key:"getValidUntilTimeStamp",value:function getValidUntilTimeStamp(key){if(this.isLocalStorageAvailable()){var value=localStorage.getItem(key);if(value&&("{"!==value[0]&&"["!==value[0]||(value=JSON.parse(value)),!value||value.localStorageItemValidUntil))return value.localStorageItemValidUntil}}},{key:"valueTimeStampValidation",value:function valueTimeStampValidation(value,key){return this.isTimeStampValid(value.localStorageItemValidUntil)?value.value:void this.removeItem(key)}},{key:"removeItem",value:function removeItem(key){this.isLocalStorageAvailable()&&localStorage.removeItem(key)}}]),LocalStorageHelper}())},"./src/helpers/location-helper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _session_storage_helper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/session-storage-helper.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:String(i)}const __WEBPACK_DEFAULT_EXPORT__=new(function(){function LocationHelper(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LocationHelper)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(LocationHelper,[{key:"navigateBack",value:function navigateBack(){"undefined"!=typeof window&&window.history.go(-1)}},{key:"addHashToUrlWithoutReload",value:function addHashToUrlWithoutReload(valuesArray){if("undefined"!=typeof document&&"undefined"!=typeof window&&window.history&&window.history.replaceState){if(!(valuesArray instanceof Array&&valuesArray.length>0))return window.history.replaceState({},"".concat(document.title),window.location.pathname+window.location.search);var allValues=valuesArray.map((function(item){return item.key+"="+item.value})).join("&");return window.history.replaceState({},"".concat(document.title),"#".concat(allValues))}}},{key:"updateHistory",value:function updateHistory(url,title){var replace=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"undefined"!=typeof window&&window.history&&window.history.pushState&&!replace&&window.history.pushState({previousPath:window.location.pathname},title,url),"undefined"!=typeof window&&window.history&&window.history.replaceState&&replace&&window.history.replaceState({},title,url)}},{key:"getDecodedHashParams",value:function getDecodedHashParams(){var hashParams={};return"undefined"!=typeof window&&window.location&&window.location.hash&&window.location.hash.substring(1).split("&").forEach((function(item){var _item$split2=_slicedToArray(item.split("="),2),k=_item$split2[0],v=_item$split2[1];v=v&&decodeURIComponent(v),(hashParams[k]=hashParams[k]||[]).push(v)})),hashParams}},{key:"getQueryParams",value:function getQueryParams(){var pageParams={};return"undefined"!=typeof window&&window.location.search&&window.location.search.substring(1).split("&").forEach((function(item){var _item$split4=_slicedToArray(item.split("="),2),k=_item$split4[0],v=_item$split4[1];v=v&&decodeURIComponent(v),(pageParams[k]=pageParams[k]||[]).push(v)})),pageParams}},{key:"getChannelFromQuery",value:function getChannelFromQuery(){var pageParams=this.getQueryParams();return pageParams instanceof Object&&pageParams.channel instanceof Array&&pageParams.channel.length&&pageParams.channel[0]?pageParams.channel[0]:""}},{key:"setPostMyParksLogin",value:function setPostMyParksLogin(postLoginUrl,pageName){var routeBeforeRedirect={pageName,pageUrl:postLoginUrl};_session_storage_helper__WEBPACK_IMPORTED_MODULE_0__.Z.setItem("routeBeforeRedirect",routeBeforeRedirect,null)}},{key:"getPostMyParksLogin",value:function getPostMyParksLogin(){var routeBeforeRedirect=_session_storage_helper__WEBPACK_IMPORTED_MODULE_0__.Z.getItem("routeBeforeRedirect");return routeBeforeRedirect&&routeBeforeRedirect.pageUrl?routeBeforeRedirect:null}},{key:"clearPostMyParksLogin",value:function clearPostMyParksLogin(){_session_storage_helper__WEBPACK_IMPORTED_MODULE_0__.Z.removeItem("routeBeforeRedirect")}}]),LocationHelper}())},"./src/helpers/session-storage-helper.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _date_helper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/date-helper.ts");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:String(i)}const __WEBPACK_DEFAULT_EXPORT__=new(function(){function SessionStorageHelper(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SessionStorageHelper)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(SessionStorageHelper,[{key:"isSessionStorageAvailable",value:function isSessionStorageAvailable(){try{sessionStorage.isAvailable=!0}catch(e){return!1}return"undefined"!=typeof window}},{key:"setItem",value:function setItem(key,value,timestamp){this.isSessionStorageAvailable()&&key&&value&&(timestamp&&(value={value,sessionStorageItemValidUntil:timestamp}),"object"===_typeof(value)&&(value=JSON.stringify(value)),sessionStorage.setItem(key,value))}},{key:"isTimeStampValid",value:function isTimeStampValid(timestamp){var now=(0,_date_helper__WEBPACK_IMPORTED_MODULE_0__.Bq)();return timestamp>=now.setMinutes(now.getMinutes())}},{key:"getItem",value:function getItem(key){if(this.isSessionStorageAvailable()){if("undefined"==typeof sessionStorage)return null;var value=sessionStorage.getItem(key);if(value)return"{"!==value[0]&&"["!==value[0]||(value=JSON.parse(value)),value&&!value.sessionStorageItemValidUntil?value:this.valueTimeStampValidation(value,key)}}},{key:"valueTimeStampValidation",value:function valueTimeStampValidation(value,key){return this.isTimeStampValid(value.sessionStorageItemValidUntil)?value.value:void this.removeItem(key)}},{key:"removeItem",value:function removeItem(key){this.isSessionStorageAvailable()&&sessionStorage.removeItem(key)}}]),SessionStorageHelper}())},"./src/hooks/use-on-pre-navigate.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>useOnPreNavigate});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useOnPreNavigate(callback){var targetClickedRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1);return function(event){var _click,_ref;if("function"==typeof callback&&!targetClickedRef.current){targetClickedRef.current=!0,event.persist(),event.preventDefault();for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];callback.apply(void 0,[event].concat(args)),null===(_click=(_ref=event.target).click)||void 0===_click||_click.call(_ref)}}}},"./src/stores/product-store.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _core_helpers_language_helper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/helpers/language-helper.ts"),_core_helpers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/array-helper.ts"),_core_helpers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/local-storage-helper.ts");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:String(i)}const __WEBPACK_DEFAULT_EXPORT__=new(function(){function ProductStore(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ProductStore),_defineProperty(this,"products",{}),_defineProperty(this,"initialized",!1)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ProductStore,[{key:"populateStore",value:function populateStore(products){var _this=this;(0,_core_helpers__WEBPACK_IMPORTED_MODULE_0__.Of)(products)&&!this.initialized&&(products.forEach((function(product){var _this$products,_this$products$locale,locale=product.node.node_locale;null!==(_this$products$locale=(_this$products=_this.products)[locale])&&void 0!==_this$products$locale||(_this$products[locale]=[]),_this.products[locale].push(product.node)})),this.initialized=!0)}},{key:"getProductByGlkId",value:function getProductByGlkId(glkId){var _this$products$locale2,_foundProducts$,locale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_core_helpers_language_helper__WEBPACK_IMPORTED_MODULE_1__.Z.getCurrentLocale();if(!this.initialized)return null;var foundProducts=null===(_this$products$locale2=this.products[locale])||void 0===_this$products$locale2?void 0:_this$products$locale2.filter((function(product){return product.productData&&product.productData.glkId.toString()===glkId.toString()}));if(foundProducts.length>1&&"true"===_core_helpers__WEBPACK_IMPORTED_MODULE_2__.Z.getItem("debug")){console.log("Multiple products found with same GLKID (".concat(glkId,"): ")),console.log("-----------------------------------------------");var _step,_iterator=_createForOfIteratorHelper(foundProducts);try{for(_iterator.s();!(_step=_iterator.n()).done;){var product=_step.value;console.log(product.productName+" - "+product.contentful_id)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return null!==(_foundProducts$=foundProducts[0])&&void 0!==_foundProducts$?_foundProducts$:null}},{key:"getProductsForLocale",value:function getProductsForLocale(locale){var _this$products$locale3;return this.initialized?null!==(_this$products$locale3=this.products[locale])&&void 0!==_this$products$locale3?_this$products$locale3:[]:null}}]),ProductStore}())},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/postcss-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/components/elements/loading-block/loading-block.module.less":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".loading-block-module--loader-icon--fnlil path {\n  stroke: var(--component-loading-block-color);\n}\n","",{version:3,sources:["webpack://./src/components/elements/loading-block/loading-block.module.less"],names:[],mappings:"AAAA;EAEI,4CAAA;AAAJ",sourcesContent:[".loader-icon {\n  path {\n    stroke: var(--component-loading-block-color);\n  }\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={"loader-icon":"loading-block-module--loader-icon--fnlil",loaderIcon:"loading-block-module--loader-icon--fnlil"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/postcss-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/components/hocs/page-lock/page-lock.module.less":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"/* Breakpoints for responsive design\n   IMPORTANT! Make sure to keep these in sync with the breakpoints in ts file (used by hooks) (src\\constants\\breakpoints.ts)\n   IMPORTANT! useIsMobile() hook uses these breakpoints to determine if the device is mobile or not, make sure to update the hook if you change these breakpoints\n */\n.page-lock-module--modal-inner--x9yp5 {\n  padding-left: var(--foundation-spacing-x2);\n  padding-right: var(--foundation-spacing-x2);\n}\n.page-lock-module--content--T1lyD {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: space-around;\n  background: var(--modal-background, var(--primary-background));\n  color: var(--text-color);\n  border-radius: 1rem;\n  padding: var(--foundation-spacing-x4) var(--foundation-spacing-x8);\n}\n@media (max-width: 20rem) {\n  .page-lock-module--content--T1lyD {\n    padding: var(--foundation-spacing-x2);\n  }\n}\n.page-lock-module--bigger-content--gpwcv {\n  display: block;\n  padding: var(--foundation-spacing-x4) var(--foundation-spacing-x4);\n}\n.page-lock-module--loader--zSNbR {\n  justify-self: center;\n  width: var(--foundation-block-width-2);\n}\n.page-lock-module--input--Qnj3c {\n  margin-bottom: 0.5rem;\n}\n.page-lock-module--button--vUR3Q {\n  margin-top: 1rem;\n  width: 100%;\n}\n.page-lock-module--error--YwL3R {\n  text-align: center;\n}\n.page-lock-module--my-page-lock-home-button--WojDG {\n  margin-top: var(--foundation-spacing-x6);\n}\n","",{version:3,sources:["webpack://./src/components/hocs/page-lock/page-lock.module.less"],names:[],mappings:"AAAA;;;EAGE;AADF;EACE,0CAAA;EACA,2CAAA;AAGF;AAAA;EACE,aAAA;EACA,mBAAA;EACA,sBAAA;EACA,6BAAA;EAEA,8DAAA;EACA,wBAAA;EACA,mBAAA;EACA,kEAAA;AACF;AACE;EAAA;IACE,qCAAA;EAEF;AACF;AACA;EACE,cAAA;EACA,kEAAA;AACF;AAEA;EACE,oBAAA;EACA,sCAAA;AAAF;AAGA;EACE,qBAAA;AADF;AAIA;EACE,gBAAA;EACA,WAAA;AAFF;AAKA;EACE,kBAAA;AAHF;AAMA;EACE,wCAAA;AAJF",sourcesContent:['@import "../../../constants/breakpoints.less";\n\n.modal-inner {\n  padding-left: var(--foundation-spacing-x2);\n  padding-right: var(--foundation-spacing-x2);\n}\n\n.content {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: space-around;\n\n  background: var(--modal-background, var(--primary-background));\n  color: var(--text-color);\n  border-radius: 1rem;\n  padding: var(--foundation-spacing-x4) var(--foundation-spacing-x8);\n\n  @media @xxsmall-only {\n    padding: var(--foundation-spacing-x2);\n  }\n}\n\n.bigger-content {\n  display: block;\n  padding: var(--foundation-spacing-x4) var(--foundation-spacing-x4);\n}\n\n.loader {\n  justify-self: center;\n  width: var(--foundation-block-width-2);\n}\n\n.input {\n  margin-bottom: 0.5rem;\n}\n\n.button {\n  margin-top: 1rem;\n  width: 100%;\n}\n\n.error {\n  text-align: center;\n}\n\n.my-page-lock-home-button {\n  margin-top: var(--foundation-spacing-x6);\n}\n'],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={"modal-inner":"page-lock-module--modal-inner--x9yp5",modalInner:"page-lock-module--modal-inner--x9yp5",content:"page-lock-module--content--T1lyD","bigger-content":"page-lock-module--bigger-content--gpwcv",biggerContent:"page-lock-module--bigger-content--gpwcv",loader:"page-lock-module--loader--zSNbR",input:"page-lock-module--input--Qnj3c",button:"page-lock-module--button--vUR3Q",error:"page-lock-module--error--YwL3R","my-page-lock-home-button":"page-lock-module--my-page-lock-home-button--WojDG",myPageLockHomeButton:"page-lock-module--my-page-lock-home-button--WojDG"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/components/hocs/page-lock/page-lock.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CodeLockAndDateTimeLockHasPassed:()=>CodeLockAndDateTimeLockHasPassed,CodeLockAndDateTimeLockNotPassed:()=>CodeLockAndDateTimeLockNotPassed,DateTimeLockHasPassed:()=>DateTimeLockHasPassed,DateTimeLockNotPassed:()=>DateTimeLockNotPassed,Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>page_lock_stories});var react=__webpack_require__("./node_modules/react/index.js"),input_field=__webpack_require__("./src/components/forms/input-field/input-field.tsx"),form_builder=__webpack_require__("./src/helpers/form-builder.ts"),parks_button=__webpack_require__("./src/components/shared-components/parks-button/parks-button.tsx"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),page_lock_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/postcss-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/components/hocs/page-lock/page-lock.module.less"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(page_lock_module.Z,options);const page_lock_page_lock_module=page_lock_module.Z&&page_lock_module.Z.locals?page_lock_module.Z.locals:void 0;var es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),local_storage_helper=__webpack_require__("./src/helpers/local-storage-helper.ts"),array_helper=__webpack_require__("./src/helpers/array-helper.ts"),location_helper=__webpack_require__("./src/helpers/location-helper.ts"),language_helper=__webpack_require__("./src/helpers/language-helper.ts"),date_helper=__webpack_require__("./src/helpers/date-helper.ts"),dayjs_min=__webpack_require__("./node_modules/dayjs/dayjs.min.js"),dayjs_min_default=__webpack_require__.n(dayjs_min),auth_types_AuthActionTypes=function(AuthActionTypes){return AuthActionTypes.DEBUG="DEBUG",AuthActionTypes.SESSION_CREATED="SESSION_CREATED",AuthActionTypes.SESSION_UPDATED="SESSION_UPDATED",AuthActionTypes.SESSION_DELETED="SESSION_DELETED",AuthActionTypes.SERVER_ERROR="SERVER_ERROR",AuthActionTypes.USER_PRODUCTS_UPDATED="USER_PRODUCTS_UPDATED",AuthActionTypes.CARD_REGISTERED="CARD_REGISTERED",AuthActionTypes.CARD_BOOKING_SUCCESSFUL="CARD_BOOKING_SUCCESSFUL",AuthActionTypes.FETCH_PRODUCTS_REQUEST="FETCH_PRODUCTS_REQUEST",AuthActionTypes.FETCH_PRODUCTS_SUCCESS="FETCH_PRODUCTS_SUCCESS",AuthActionTypes.FETCH_PRODUCTS_FAILURE="FETCH_PRODUCTS_FAILURE",AuthActionTypes.FETCH_GIFTS_REQUEST="FETCH_GIFTS_REQUEST",AuthActionTypes.FETCH_GIFTS_SUCCESS="FETCH_GIFTS_SUCCESS",AuthActionTypes.FETCH_GIFTS_FAILURE="FETCH_GIFTS_FAILURE",AuthActionTypes.FETCH_CONTACTLESS_SUMMARIES_REQUEST="FETCH_CONTACTLESS_SUMMARIES_REQUEST",AuthActionTypes.FETCH_CONTACTLESS_SUMMARIES_SUCCESS="FETCH_CONTACTLESS_SUMMARIES_SUCCESS",AuthActionTypes.FETCH_CONTACTLESS_SUMMARIES_FAILURE="FETCH_CONTACTLESS_SUMMARIES_FAILURE",AuthActionTypes.FETCH_CONTACTLESS_DETAILS_REQUEST="FETCH_CONTACTLESS_DETAILS_REQUEST",AuthActionTypes.FETCH_CONTACTLESS_DETAILS_SUCCESS="FETCH_CONTACTLESS_DETAILS_SUCCESS",AuthActionTypes.FETCH_CONTACTLESS_DETAILS_FAILURE="FETCH_CONTACTLESS_DETAILS_FAILURE",AuthActionTypes.FETCH_SESSION_FAILURE="FETCH_SESSION_FAILURE",AuthActionTypes.FETCH_SESSION_REQUEST="FETCH_SESSION_REQUEST",AuthActionTypes.POST_GIFTS_SUCCESS="POST_GIFTS_SUCCESS",AuthActionTypes.CONTACTLESS_VISITORS_UPDATED="CONTACTLESS_VISITORS_UPDATED",AuthActionTypes.SET_CONTACTLESS_VISITORS="SET_CONTACTLESS_VISITORS",AuthActionTypes.SET_SAVED_PAYMENT_METHOD="SET_SAVED_PAYMENT_METHOD",AuthActionTypes}({}),ProductTypes=function(ProductTypes){return ProductTypes.SEASON_PASS="SEASON_PASS",ProductTypes.ENTRY_TICKET="ENTRY_TICKET",ProductTypes.ATTRACTION_TICKET="ATTRACTION_TICKET",ProductTypes.STANDARD_PRODUCT="STANDARD_PRODUCT",ProductTypes.PARKING_PRODUCT="PARKING_PRODUCT",ProductTypes.ACTIVITY_PASS="ACTIVITY_PASS",ProductTypes.BOOKABLE_PRODUCT="BOOKABLE_PRODUCT",ProductTypes.SMART_WRISTBAND="SMART_WRISTBAND",ProductTypes}({}),product_store=__webpack_require__("./src/stores/product-store.ts"),object_helper=__webpack_require__("./src/helpers/object-helper.ts");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var initialAuthState={debugToggle:!1,user:void 0,antiCsrfToken:void 0,loginMethod:void 0,isLoggedIn:!1,cookieString:void 0,productsFetched:!1,isFetchingProducts:!1,productFetchFailed:!1,giftsFetched:!1,isFetchingGifts:!1,giftFetchFailed:!1,gifts:[],sessionFetched:!1,sessionFetchFailed:!1,isFetchingSession:!1,webOrders:[],looseRows:[],contactless:{visitors:[]},contactlessOrders:void 0,isFetchingContactlessOrders:!1,contactlessOrdersFetchFailed:!1,contactlessOrderDetails:{},savedPaymentMethod:null},entryTicketDateAscendingSort=function entryTicketDateAscendingSort(a,b){var _a$validity,_b$validity,aNotBefore=null===(_a$validity=a.validity)||void 0===_a$validity?void 0:_a$validity.notBefore,bNotBefore=null===(_b$validity=b.validity)||void 0===_b$validity?void 0:_b$validity.notBefore;return aNotBefore||bNotBefore?bNotBefore?aNotBefore?aNotBefore>bNotBefore?1:aNotBefore<bNotBefore?-1:0:1:-1:0},fillFromProduct=function fillFromProduct(productId,item,type){var _ref,_id,contentfulData=product_store.Z.getProductByGlkId(productId),productName=contentfulData?contentfulData.productName:void 0,id=null!==(_ref=null!==(_id=item.id)&&void 0!==_id?_id:item.visitorId)&&void 0!==_ref?_ref:void 0,template=item.template;return productName||(productName="productName"in item?item.productName:template?template.name:void 0),_objectSpread(_objectSpread(_objectSpread({},item),contentfulData),{},{id,productName,productType:type})},authReducer=function authReducer(state,action){switch(action.type){case auth_types_AuthActionTypes.DEBUG:return _objectSpread(_objectSpread({},state),{},{debugToggle:!state.debugToggle});case auth_types_AuthActionTypes.SESSION_CREATED:case auth_types_AuthActionTypes.SESSION_UPDATED:return _objectSpread(_objectSpread(_objectSpread({},state),action.payload),{},{isFetchingSession:!1,sessionFetchFailed:!1,sessionFetched:!0});case auth_types_AuthActionTypes.FETCH_SESSION_REQUEST:return _objectSpread(_objectSpread({},state),{},{isFetchingSession:!0});case auth_types_AuthActionTypes.FETCH_SESSION_FAILURE:return _objectSpread(_objectSpread({},state),{},{isFetchingSession:!1,sessionFetchFailed:!0,sessionFetched:!0});case auth_types_AuthActionTypes.SESSION_DELETED:return _objectSpread({},initialAuthState);case auth_types_AuthActionTypes.POST_GIFTS_SUCCESS:var _state$entryTickets,_step,gifts=action.payload.giftResponse.gifts,allGiftedOrderRowIds=[],_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(gifts);try{for(_iterator.s();!(_step=_iterator.n()).done;){var giftedOrderRowIdsForGift=_step.value.rows.map((function(row){return row.webOrderRowId}));allGiftedOrderRowIds.push.apply(allGiftedOrderRowIds,_toConsumableArray(giftedOrderRowIdsForGift))}}catch(err){_iterator.e(err)}finally{_iterator.f()}var entryTicketsWithoutGifted=null===(_state$entryTickets=state.entryTickets)||void 0===_state$entryTickets?void 0:_state$entryTickets.filter((function(entryTicket){return!allGiftedOrderRowIds.includes(entryTicket.orderRowId)}));return _objectSpread(_objectSpread({},state),{},{entryTickets:entryTicketsWithoutGifted});case auth_types_AuthActionTypes.FETCH_PRODUCTS_FAILURE:case auth_types_AuthActionTypes.SERVER_ERROR:return _objectSpread(_objectSpread({},state),{},{isFetchingProducts:!1,productFetchFailed:!0});case auth_types_AuthActionTypes.FETCH_PRODUCTS_REQUEST:return _objectSpread(_objectSpread({},state),{},{isFetchingProducts:!0});case auth_types_AuthActionTypes.FETCH_PRODUCTS_SUCCESS:case auth_types_AuthActionTypes.USER_PRODUCTS_UPDATED:var data=function populateItems(data){var activityPasses=data.activityPasses.map((function(item){return fillFromProduct(item.productId,item,ProductTypes.ACTIVITY_PASS)})),attractionTickets=data.attractionTickets.map((function(item){return _objectSpread({},fillFromProduct(item.productId,item,ProductTypes.ATTRACTION_TICKET))})),bookableProducts=data.bookableProducts.map((function(item){return _objectSpread({},fillFromProduct(item.productId,item,ProductTypes.BOOKABLE_PRODUCT))})),entryTickets=data.entryTickets.map((function(item){return _objectSpread({},fillFromProduct(item.productId,item,ProductTypes.ENTRY_TICKET))}));entryTickets.sort(entryTicketDateAscendingSort);var seasonPasses=data.seasonPasses.map((function(item){return _objectSpread(_objectSpread({},fillFromProduct(item.productId,item,ProductTypes.SEASON_PASS)),item)})),standardProducts=data.standardProducts.map((function(item){return _objectSpread({},fillFromProduct(item.productId,item,ProductTypes.STANDARD_PRODUCT))})),parkingProducts=data.parkingProducts.map((function(item){return _objectSpread({},fillFromProduct(item.productId,item,ProductTypes.PARKING_PRODUCT))})),reactivatableSeasonPasses=data.reactivatableSeasonPasses.map((function(item){return _objectSpread(_objectSpread({},fillFromProduct(item.productId,item,ProductTypes.SEASON_PASS)),item)})),smartWristbands=data.contactless.visitors.map((function(item){return _objectSpread(_objectSpread({},fillFromProduct(item.productId,item,ProductTypes.SMART_WRISTBAND)),item)})),contactless=_objectSpread(_objectSpread({},data.contactless),{},{visitors:smartWristbands}),webOrders=data.webOrders.map((function(item){return _objectSpread(_objectSpread({},item),{},{rows:item.rows.map((function(row){return fillFromProduct(row.productId,row)}))})})),looseRows=data.looseRows.map((function(item){return _objectSpread({},fillFromProduct(item.productId,item))}));return{activityPasses,attractionTickets,bookableProducts,entryTickets,parkingPermits:data.parkingPermits,seasonPasses,standardProducts,parkingProducts,reactivatableSeasonPasses,contactless,webOrders,looseRows}}(action.payload.userProducts);return _objectSpread(_objectSpread(_objectSpread({},state),data),{},{error:!1,productsFetched:!0,errorSource:null,productsFetchTime:action.payload.productsFetchTime,isFetchingProducts:!1,productFetchFailed:!1});case auth_types_AuthActionTypes.CARD_REGISTERED:var _state$seasonPasses,filled=_objectSpread(_objectSpread(_objectSpread({},fillFromProduct(action.payload.registerCardResponse.productId,action.payload.registerCardResponse)),action.payload.registerCardResponse),{},{willBeActivated:!0}),itemIndex=null===(_state$seasonPasses=state.seasonPasses)||void 0===_state$seasonPasses?void 0:_state$seasonPasses.findIndex((function(seasonPass){return seasonPass.orderRowId===filled.orderRowId}));if(void 0===itemIndex)return _objectSpread({},state);var updatedSeasonPasses=state.seasonPasses?_toConsumableArray(state.seasonPasses):[];return itemIndex>-1?updatedSeasonPasses[itemIndex]=filled:updatedSeasonPasses.push(filled),_objectSpread(_objectSpread({},state),{},{seasonPasses:updatedSeasonPasses});case auth_types_AuthActionTypes.CARD_BOOKING_SUCCESSFUL:if(!(0,array_helper.Of)(action.payload.bookings))return _objectSpread({},state);var initialValue=state.seasonPasses?_toConsumableArray(state.seasonPasses):[],_updatedSeasonPasses=action.payload.bookings.reduce((function(seasonPasses,newBooking){var itemIndex=seasonPasses.findIndex((function(seasonPass){return seasonPass.barcode===newBooking.barcode}));if(-1===itemIndex)return seasonPasses;var modifiedSeasonPasses=_toConsumableArray(seasonPasses),seasonPass=modifiedSeasonPasses[itemIndex];if(null===seasonPass.bookings||void 0===seasonPass.bookings)return seasonPass.bookings=newBooking.bookings,modifiedSeasonPasses;var productId=(0,object_helper.Kl)(action,"payload.productId");return seasonPass.bookings[productId]?(seasonPass.bookings[productId]=[].concat(_toConsumableArray(seasonPass.bookings[productId]),_toConsumableArray(newBooking.bookings[productId])),modifiedSeasonPasses):(seasonPass.bookings=_objectSpread(_objectSpread({},seasonPass.bookings),newBooking.bookings),modifiedSeasonPasses)}),initialValue);return _objectSpread(_objectSpread({},state),{},{seasonPasses:_updatedSeasonPasses});case auth_types_AuthActionTypes.FETCH_GIFTS_REQUEST:return _objectSpread(_objectSpread({},state),{},{isFetchingGifts:!0});case auth_types_AuthActionTypes.FETCH_GIFTS_SUCCESS:var giftsWithTrimmedDatesOnRow=action.payload.giftsResponse.gifts.map((function(gift){return _objectSpread(_objectSpread({},gift),{},{rows:gift.rows.map((function(row){return _objectSpread(_objectSpread({},row),{},{dateFrom:date_helper.ZP.toStringYYYYMMDD(row.dateFrom),dateTo:date_helper.ZP.toStringYYYYMMDD(row.dateTo)})}))})})),expandedGiftRows=giftsWithTrimmedDatesOnRow.map((function(gift){return _objectSpread(_objectSpread({},gift),{},{rows:gift.rows.map((function(row){var _ref2,_maybeProduct$product,maybeProduct=product_store.Z.getProductByGlkId(row.productId),newName=null!==(_ref2=null!==(_maybeProduct$product=null==maybeProduct?void 0:maybeProduct.productNameMyPages)&&void 0!==_maybeProduct$product?_maybeProduct$product:null==maybeProduct?void 0:maybeProduct.productName)&&void 0!==_ref2?_ref2:row.productName;return _objectSpread(_objectSpread({},row),{},{productName:null!=newName?newName:void 0,senderName:gift.senderName,createdAt:gift.createdAt,recipient:gift.recipient,message:gift.message})}))})}));return _objectSpread(_objectSpread({},state),{},{gifts:expandedGiftRows,giftsFetched:!0,isFetchingGifts:!1,giftFetchFailed:!1});case auth_types_AuthActionTypes.FETCH_GIFTS_FAILURE:return _objectSpread(_objectSpread({},state),{},{giftsFetched:!1,isFetchingGifts:!1,giftFetchFailed:!0});case auth_types_AuthActionTypes.FETCH_CONTACTLESS_SUMMARIES_REQUEST:return _objectSpread(_objectSpread({},state),{},{isFetchingContactlessOrders:!0});case auth_types_AuthActionTypes.FETCH_CONTACTLESS_SUMMARIES_SUCCESS:return _objectSpread(_objectSpread({},state),{},{contactlessOrders:action.payload.response,isFetchingContactlessOrders:!1,contactlessOrdersFetchFailed:!1});case auth_types_AuthActionTypes.FETCH_CONTACTLESS_SUMMARIES_FAILURE:return _objectSpread(_objectSpread({},state),{},{isFetchingContactlessOrders:!1,contactlessOrdersFetchFailed:!0});case auth_types_AuthActionTypes.FETCH_CONTACTLESS_DETAILS_REQUEST:var _state$contactlessOrd,existingOrder=null!==(_state$contactlessOrd=state.contactlessOrderDetails[action.payload.orderId])&&void 0!==_state$contactlessOrd?_state$contactlessOrd:{};return _objectSpread(_objectSpread({},state),{},{contactlessOrderDetails:_objectSpread(_objectSpread({},state.contactlessOrderDetails),{},_defineProperty({},action.payload.orderId,_objectSpread(_objectSpread({},existingOrder),{},{isFetching:!0,fetchFailed:!1})))});case auth_types_AuthActionTypes.FETCH_CONTACTLESS_DETAILS_SUCCESS:var _state$contactlessOrd2,_existingOrder=null!==(_state$contactlessOrd2=state.contactlessOrderDetails[action.payload.orderId])&&void 0!==_state$contactlessOrd2?_state$contactlessOrd2:{};return _objectSpread(_objectSpread({},state),{},{contactlessOrderDetails:_objectSpread(_objectSpread({},state.contactlessOrderDetails),{},_defineProperty({},action.payload.orderId,_objectSpread(_objectSpread({},_existingOrder),{},{isFetching:!1,fetchFailed:!1,order:action.payload.response})))});case auth_types_AuthActionTypes.FETCH_CONTACTLESS_DETAILS_FAILURE:var _state$contactlessOrd3,_existingOrder2=null!==(_state$contactlessOrd3=state.contactlessOrderDetails[action.payload.orderId])&&void 0!==_state$contactlessOrd3?_state$contactlessOrd3:{};return _objectSpread(_objectSpread({},state),{},{contactlessOrderDetails:_objectSpread(_objectSpread({},state.contactlessOrderDetails),{},_defineProperty({},action.payload.orderId,_objectSpread(_objectSpread({},_existingOrder2),{},{isFetching:!1,fetchFailed:!0})))});case auth_types_AuthActionTypes.CONTACTLESS_VISITORS_UPDATED:var updatedVisitor=action.payload.visitor;if(!state.contactless.visitors.find((function(visitor){return visitor.visitorId===updatedVisitor.visitorId})))return _objectSpread({},state);var updatedVisitors=state.contactless.visitors.map((function(visitor){return visitor.visitorId===updatedVisitor.visitorId?updatedVisitor:visitor}));return _objectSpread(_objectSpread({},state),{},{contactless:{visitors:updatedVisitors}});case auth_types_AuthActionTypes.SET_CONTACTLESS_VISITORS:var smartWristbands=Object.values(action.payload).filter((function(item){return void 0!==item})).map((function(item){return _objectSpread(_objectSpread({},fillFromProduct(item.productId,item,ProductTypes.SMART_WRISTBAND)),item)}));return smartWristbands.some((function(smartWristband){var correspondingVisitor=state.contactless.visitors.find((function(visitor){return visitor.visitorId===smartWristband.visitorId}));return!correspondingVisitor||JSON.stringify(smartWristband)!==JSON.stringify(correspondingVisitor)}))?_objectSpread(_objectSpread({},state),{},{contactless:{visitors:smartWristbands}}):state;case auth_types_AuthActionTypes.SET_SAVED_PAYMENT_METHOD:return _objectSpread(_objectSpread({},state),{},{savedPaymentMethod:action.payload});default:return(0,object_helper.y0)(action)}},axios=__webpack_require__("./node_modules/axios/lib/axios.js"),src=__webpack_require__("./node_modules/@parksandresorts/myparks-types/dist/src/index.js");function myparks_service_typeof(o){return myparks_service_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},myparks_service_typeof(o)}function myparks_service_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function myparks_service_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?myparks_service_ownKeys(Object(t),!0).forEach((function(r){myparks_service_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):myparks_service_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==myparks_service_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:"suspendedYield",p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(myparks_service_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,myparks_service_toPropertyKey(descriptor.key),descriptor)}}function myparks_service_defineProperty(obj,key,value){return(key=myparks_service_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function myparks_service_toPropertyKey(t){var i=function myparks_service_toPrimitive(t,r){if("object"!=myparks_service_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=myparks_service_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==myparks_service_typeof(i)?i:String(i)}var myparks_service_MyParksService=function(){function MyParksService(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MyParksService),myparks_service_defineProperty(this,"url",null),myparks_service_defineProperty(this,"company",null),myparks_service_defineProperty(this,"language","sv"),myparks_service_defineProperty(this,"antiCsrfToken",null)}var _fetch2,_authorizedFetchWithPlainResponse2,_authorizedFetch2,_getContactlessOrders;return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(MyParksService,[{key:"updateAuth",value:function updateAuth(auth){auth&&auth.antiCsrfToken&&(this.antiCsrfToken=auth.antiCsrfToken)}},{key:"init",value:function init(language,apiUrl,apiCompany){this.language=language,this.url=apiUrl,this.company=apiCompany}},{key:"initiateSession",value:function initiateSession(identifier,isAutoLoginToken){var identify=isAutoLoginToken?{autoLoginToken:identifier}:{identifier};return this._authorizedFetch("session/pin","POST",{body:identify})}},{key:"postVerificationCode",value:function postVerificationCode(code){var postBody={pin:code};return this._authorizedFetch("session/pin/validate","POST",{body:postBody})}},{key:"fetchSession",value:function fetchSession(){return this._authorizedFetch("session","GET")}},{key:"deleteSession",value:function deleteSession(){return this._authorizedFetch("session","DELETE")}},{key:"getSessionCookie",value:function getSessionCookie(){return document.cookie.replace(/(?:(?:^|.*;\s*)session\s*=\s*([^;]*).*$)|^.*$/,"$1")}},{key:"getContactlessVisitors",value:function getContactlessVisitors(){return this._authorizedFetchWithPlainResponse("".concat("contactless","/visitors"),"GET")}},{key:"getValidateContactlessVisitorTag",value:function getValidateContactlessVisitorTag(requestId){return this._authorizedFetchWithPlainResponse("".concat("contactless","/tag/").concat(requestId),"GET")}},{key:"postRegisterContactlessVisitorTag",value:function postRegisterContactlessVisitorTag(visitorId,requestBody){return this._authorizedFetchWithPlainResponse("".concat("contactless","/visitor/").concat(visitorId,"/registerTag"),"POST",{body:requestBody})}},{key:"updateContactlessVisitor",value:function updateContactlessVisitor(visitorId,updatedFieldsBody){return this._authorizedFetchWithPlainResponse("".concat("contactless","/visitor/").concat(visitorId),"PATCH",{body:updatedFieldsBody})}},{key:"blockContactlessTag",value:function blockContactlessTag(shortIds){var reason=arguments.length>1&&void 0!==arguments[1]?arguments[1]:src.rh.GOING_HOME,comment=arguments.length>2?arguments[2]:void 0,requestBody={reason,shortIds,comment};return this._authorizedFetchWithPlainResponse("".concat("contactless","/tags"),"DELETE",{body:requestBody})}},{key:"getContactlessPaymentMethod",value:function getContactlessPaymentMethod(){return this._authorizedFetchWithPlainResponse("".concat("contactless","/savedPaymentMethod"),"GET")}},{key:"updateContactlessPaymentMethod",value:function updateContactlessPaymentMethod(){return this._authorizedFetchWithPlainResponse("".concat("contactless","/savedPaymentMethod"),"PUT",{body:{paymentProvider:"Nets"}})}},{key:"getContactlessOrders",value:(_getContactlessOrders=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this._authorizedFetchWithPlainResponse("".concat("contactless","/orders"),"GET");case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee,this)}))),function getContactlessOrders(){return _getContactlessOrders.apply(this,arguments)})},{key:"getContactlessOrderDetails",value:function getContactlessOrderDetails(orderId){return this._authorizedFetchWithPlainResponse("".concat("contactless","/order/").concat(orderId),"GET")}},{key:"getContactlessGamification",value:function getContactlessGamification(){return this._authorizedFetchWithPlainResponse("".concat("gamification/visitors-visits"),"GET")}},{key:"updateUser",value:function updateUser(userAltId,updatedUser){var endpoint="".concat("users","/").concat(userAltId);return this._authorizedFetch(endpoint,"PATCH",{body:updatedUser})}},{key:"fetchProducts",value:function fetchProducts(){return this._authorizedFetch("products","GET")}},{key:"acceptSharing",value:function acceptSharing(giftId,giftToken){return this.acceptGift(giftId,giftToken)}},{key:"cancelSharing",value:function cancelSharing(giftId){return this.cancelGift(giftId)}},{key:"addSharing",value:function addSharing(data){return this.sendGifts(data)}},{key:"removeSharing",value:function removeSharing(data){var endpoint="".concat("products/order-rows","/stop-sharing");return this._authorizedFetch(endpoint,"DELETE",{body:data})}},{key:"getSharedProducts",value:function getSharedProducts(){return this.getGifts()}},{key:"getSharedProduct",value:function getSharedProduct(productId,token){return this.getGift(productId,token)}},{key:"denySharedProduct",value:function denySharedProduct(productId,token){return this.denyGift(productId,token)}},{key:"getGift",value:function getGift(giftId,token){var endpoint="".concat("gifts","/").concat(giftId,"?token=").concat(token);return this._fetch(endpoint,"GET")}},{key:"sendGifts",value:function sendGifts(data){return this._authorizedFetch("gifts","POST",{body:data})}},{key:"getGifts",value:function getGifts(){var endpoint="".concat("gifts");return this._authorizedFetch(endpoint,"GET")}},{key:"acceptGift",value:function acceptGift(giftId,giftToken){var endpoint="".concat("gifts","/").concat(giftId,"?token=").concat(giftToken);return this._authorizedFetch(endpoint,"PATCH")}},{key:"cancelGift",value:function cancelGift(giftId){var endpoint="".concat("gifts","/").concat(giftId);return this._authorizedFetch(endpoint,"DELETE")}},{key:"denyGift",value:function denyGift(giftId,giftToken){var endpoint="".concat("gifts","/").concat(giftId,"?token=").concat(giftToken);return this._fetch(endpoint,"DELETE")}},{key:"registerCard",value:function registerCard(orderRowId,user){var endpoint="".concat("products/order-rows","/").concat(orderRowId,"/season-pass-v2");return this._authorizedFetch(endpoint,"POST",{body:user})}},{key:"registerFreeParking",value:function registerFreeParking(orderRowId,licenseNumber){var endpoint="".concat("products/order-rows","/").concat(orderRowId,"/free-parking");return this._authorizedFetch(endpoint,"POST",{body:{vrm:licenseNumber}})}},{key:"rebookOrderRows",value:function rebookOrderRows(bookingData){var endpoint="".concat("weborders/datetime");return this._authorizedFetch(endpoint,"PATCH",{body:bookingData})}},{key:"rebookQueuePassesForOrderRows",value:function rebookQueuePassesForOrderRows(bookingData){var endpoint="".concat("weborders/queuepass");return this._authorizedFetch(endpoint,"PATCH",{body:bookingData})}},{key:"requestRefundSummary",value:function requestRefundSummary(orderType,orderNo,orderRows){var endpoint="".concat("products","/orders/").concat(orderType,"/").concat(orderNo,"/refund-summary");return this._authorizedFetch(endpoint,"POST",{body:orderRows})}},{key:"refundOrderRows",value:function refundOrderRows(orderType,orderNo,orderRows,finalRefundAmount){var bodyObject={finalRefundAmount,rows:orderRows},endpoint="".concat("products","/orders/").concat(orderType,"/").concat(orderNo,"/refund");return this._authorizedFetch(endpoint,"PATCH",{body:bodyObject})}},{key:"bookPassesForCards",value:function bookPassesForCards(cards){return this._authorizedFetch("queuepasses","POST",{body:cards})}},{key:"postContactInformationForVerification",value:function postContactInformationForVerification(contactInformation){return this._fetch("contact-verification","POST",{body:contactInformation})}},{key:"getContactVerification",value:function getContactVerification(contactInformation,pinCode){var endpoint="".concat("contact-verification","?contact=").concat(contactInformation,"&code=").concat(pinCode);return this._fetch(endpoint,"GET")}},{key:"registerUser",value:function registerUser(account,verificationCode){var body={account,contactVerificationToken:verificationCode};return this._authorizedFetch("users","POST",{body})}},{key:"buildErrorResponse",value:function buildErrorResponse(error){throw error.response?{data:myparks_service_objectSpread({},error.response.data),status:error.response.status}:error.request?{data:{statusCode:503,success:!1,errors:[]},status:503}:{data:{statusCode:400,success:!1,errors:[]},status:400}}},{key:"_baseAuthorizedFetch",value:function _baseAuthorizedFetch(endpoint,method){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.url&&this.company){var body=options.body?options.body:null,contentType=options.contentType?options.contentType:"application/json",url="".concat(this.url,"/").concat(endpoint);return(0,axios.Z)({method,url,headers:{"X-Company":this.company,"X-Language":this.language,"X-Cookie":this.getSessionCookie(),"X-AntiCsrfToken":this.antiCsrfToken,"content-type":contentType},data:body,withCredentials:!0})}console.error("MyParksService is missing configuration. Current configuration url: ".concat(this.url," and company: ").concat(this.company))}},{key:"_authorizedFetch",value:(_authorizedFetch2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(endpoint,method){var options,response,_args2=arguments;return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return options=_args2.length>2&&void 0!==_args2[2]?_args2[2]:{},_context2.prev=1,_context2.next=4,this._baseAuthorizedFetch(endpoint,method,options);case 4:return response=_context2.sent,_context2.abrupt("return",myparks_service_objectSpread(myparks_service_objectSpread({},response.data.response),{},{cookieString:response.headers["x-cookie"]}));case 8:return _context2.prev=8,_context2.t0=_context2.catch(1),_context2.abrupt("return",this.buildErrorResponse(_context2.t0));case 11:case"end":return _context2.stop()}}),_callee2,this,[[1,8]])}))),function _authorizedFetch(_x,_x2){return _authorizedFetch2.apply(this,arguments)})},{key:"_authorizedFetchWithPlainResponse",value:(_authorizedFetchWithPlainResponse2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(endpoint,method){var options,response,_args3=arguments;return _regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return options=_args3.length>2&&void 0!==_args3[2]?_args3[2]:{},_context3.prev=1,_context3.next=4,this._baseAuthorizedFetch(endpoint,method,options);case 4:return response=_context3.sent,_context3.abrupt("return",response.data.response);case 8:return _context3.prev=8,_context3.t0=_context3.catch(1),_context3.abrupt("return",this.buildErrorResponse(_context3.t0));case 11:case"end":return _context3.stop()}}),_callee3,this,[[1,8]])}))),function _authorizedFetchWithPlainResponse(_x3,_x4){return _authorizedFetchWithPlainResponse2.apply(this,arguments)})},{key:"_fetch",value:(_fetch2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(endpoint,method){var options,body,contentType,url,response,_args4=arguments;return _regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(options=_args4.length>2&&void 0!==_args4[2]?_args4[2]:{},this.url&&this.company){_context4.next=4;break}return console.error("MyParksService is missing configuration. Current configuration url: ".concat(this.url," and company: ").concat(this.company)),_context4.abrupt("return");case 4:return body=options.body?options.body:null,contentType=options.contentType?options.contentType:"application/json",url="".concat(this.url,"/").concat(endpoint),_context4.next=9,(0,axios.Z)({method,url,headers:{"X-Company":this.company,"X-Language":this.language,"content-type":contentType},data:body});case 9:return response=_context4.sent,_context4.abrupt("return",response.data.response);case 11:case"end":return _context4.stop()}}),_callee4,this)}))),function _fetch(_x5,_x6){return _fetch2.apply(this,arguments)})}]),MyParksService}();const myparks_service=new myparks_service_MyParksService;var js_cookie=__webpack_require__("./node_modules/js-cookie/dist/js.cookie.mjs");function auth_action_middleware_typeof(o){return auth_action_middleware_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},auth_action_middleware_typeof(o)}function auth_action_middleware_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function auth_action_middleware_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?auth_action_middleware_ownKeys(Object(t),!0).forEach((function(r){auth_action_middleware_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):auth_action_middleware_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function auth_action_middleware_defineProperty(obj,key,value){return(key=function auth_action_middleware_toPropertyKey(t){var i=function auth_action_middleware_toPrimitive(t,r){if("object"!=auth_action_middleware_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=auth_action_middleware_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==auth_action_middleware_typeof(i)?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var saveAntiCsrfTokenToHelper=function saveAntiCsrfTokenToHelper(action){return myparks_service.updateAuth(action.payload),action},saveSessionAsCookie=function saveSessionAsCookie(action){var cookieString=(0,object_helper.Kl)(action,"payload.cookieString",void 0);if(cookieString){var date=(0,date_helper.Bq)(),expire=(0,date_helper.Bq)(date.setFullYear(date.getFullYear()+10));js_cookie.Z.set("session",cookieString,{expires:expire,path:"/"})}return action},middlewareMap=new Map;middlewareMap.set(auth_types_AuthActionTypes.DEBUG,[function addDebugTimeStamp(action){return function actionHasPayload(action){return"payload"in action}(action)?(action.payload=auth_action_middleware_objectSpread(auth_action_middleware_objectSpread({},action.payload),{},{debugDate:(0,date_helper.Bq)()}),action):action}]).set(auth_types_AuthActionTypes.SESSION_CREATED,[saveAntiCsrfTokenToHelper,saveSessionAsCookie]).set(auth_types_AuthActionTypes.SESSION_UPDATED,[saveAntiCsrfTokenToHelper,saveSessionAsCookie]).set(auth_types_AuthActionTypes.SESSION_DELETED,[function removeSessionCookie(action){return js_cookie.Z.remove("session",{path:"/"}),action}]).set(auth_types_AuthActionTypes.USER_PRODUCTS_UPDATED,[function saveFetchTimeStamp(action){var now=(0,date_helper.Bq)();return auth_action_middleware_objectSpread(auth_action_middleware_objectSpread({},action),{},{payload:auth_action_middleware_objectSpread(auth_action_middleware_objectSpread({},action.payload),{},{productsFetchTime:date_helper.ZP.toStringTimeYYYYMMDDHHMM(now)})})}]);const auth_action_middleware=function actionMiddleware(action){var middlewaresForType=middlewareMap.get(action.type);return middlewaresForType?middlewaresForType.reduce((function(prevAction,middleware){return middleware(prevAction)}),action):action};var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function auth_context_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return auth_context_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return auth_context_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function auth_context_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var AuthContext=react.createContext(initialAuthState),AuthDispatchContext=react.createContext((function(){})),reducerWithMiddleWare=(AuthDispatchContext.Consumer,AuthContext.Consumer,function reducerWithMiddleWare(state,action){return action=auth_action_middleware(action),authReducer(state,action)}),AuthContextProvider=function AuthContextProvider(_ref){var children=_ref.children,_React$useReducer2=_slicedToArray(react.useReducer(reducerWithMiddleWare,initialAuthState),2),state=_React$useReducer2[0],dispatch=_React$useReducer2[1];return(0,jsx_runtime.jsx)(AuthContext.Provider,{value:state,children:(0,jsx_runtime.jsx)(AuthDispatchContext.Provider,{value:dispatch,children})})};AuthContextProvider.displayName="AuthContextProvider";try{Context.displayName="Context",Context.__docgenInfo={description:"Context lets components pass information deep down without explicitly\npassing props.\n\nCreated from {@link createContext}",displayName:"Context",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/auth/auth-context.tsx#Context"]={docgenInfo:Context.__docgenInfo,name:"Context",path:"src/auth/auth-context.tsx#Context"})}catch(__react_docgen_typescript_loader_error){}try{AuthContextProvider.displayName="AuthContextProvider",AuthContextProvider.__docgenInfo={description:"",displayName:"AuthContextProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/auth/auth-context.tsx#AuthContextProvider"]={docgenInfo:AuthContextProvider.__docgenInfo,name:"AuthContextProvider",path:"src/auth/auth-context.tsx#AuthContextProvider"})}catch(__react_docgen_typescript_loader_error){}function auth_api_typeof(o){return auth_api_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},auth_api_typeof(o)}function auth_api_regeneratorRuntime(){auth_api_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==auth_api_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:"suspendedYield",p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(auth_api_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function auth_api_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function auth_api_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){auth_api_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){auth_api_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var fetchProducts=function(){var _ref=auth_api_asyncToGenerator(auth_api_regeneratorRuntime().mark((function _callee(dispatch){var result;return auth_api_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return dispatch({type:auth_types_AuthActionTypes.FETCH_PRODUCTS_REQUEST}),_context.prev=1,_context.next=4,myparks_service.fetchProducts();case 4:return result=_context.sent,dispatch({type:auth_types_AuthActionTypes.FETCH_PRODUCTS_SUCCESS,payload:{userProducts:result}}),_context.abrupt("return",result);case 9:return _context.prev=9,_context.t0=_context.catch(1),console.error(_context.t0),dispatch({type:auth_types_AuthActionTypes.FETCH_PRODUCTS_FAILURE,payload:{error:_context.t0}}),_context.abrupt("return",null);case 14:case"end":return _context.stop()}}),_callee,null,[[1,9]])})));return function fetchProducts(_x){return _ref.apply(this,arguments)}}(),fetchSession=function fetchSession(dispatch){dispatch({type:auth_types_AuthActionTypes.FETCH_SESSION_REQUEST}),myparks_service.fetchSession().then((function(response){var responseInfo={antiCsrfToken:(0,object_helper.Kl)(response,"antiCsrfToken",void 0),cookieString:(0,object_helper.Kl)(response,"cookieString",void 0),isLoggedIn:(0,object_helper.Kl)(response,"hasLoggedIn",void 0),user:(0,object_helper.Kl)(response,"user",null)};dispatch({type:auth_types_AuthActionTypes.SESSION_UPDATED,payload:responseInfo})})).catch((function(e){dispatch({type:auth_types_AuthActionTypes.FETCH_SESSION_FAILURE,payload:null})}))};function auth_aware_typeof(o){return auth_aware_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},auth_aware_typeof(o)}function auth_aware_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function auth_aware_defineProperty(obj,key,value){return(key=function auth_aware_toPropertyKey(t){var i=function auth_aware_toPrimitive(t,r){if("object"!=auth_aware_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=auth_aware_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==auth_aware_typeof(i)?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function auth_aware_regeneratorRuntime(){auth_aware_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==auth_aware_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:"suspendedYield",p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(auth_aware_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function auth_aware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}const auth_aware=function AuthAware(Component){return function AwareComponent(props){var state=function useAuthState(){var context=react.useContext(AuthContext);if(void 0===context)throw new Error("useAuthState must be used within a AuthProvider");return context}(),dispatch=function useAuthDispatch(){var context=react.useContext(AuthDispatchContext);if(void 0===context)throw new Error("useAuthDispatch must be used within a AuthProvider");return context}();return(0,react.useEffect)((function(){var checkInitialSession=function(){var _ref=function auth_aware_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){auth_aware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){auth_aware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(auth_aware_regeneratorRuntime().mark((function _callee(){return auth_aware_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:fetchSession(dispatch);case 1:case"end":return _context.stop()}}),_callee)})));return function checkInitialSession(){return _ref.apply(this,arguments)}}();state.sessionFetched||state.isFetchingSession||checkInitialSession()}),[state,dispatch]),(0,react.useEffect)((function(){!state.productsFetched&&state.isLoggedIn&&fetchProducts(dispatch)}),[state.productsFetched,state.isLoggedIn,dispatch]),(0,jsx_runtime.jsx)(Component,function auth_aware_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?auth_aware_ownKeys(Object(t),!0).forEach((function(r){auth_aware_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):auth_aware_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({auth:state,dispatch},props))}};try{authaware.displayName="authaware",authaware.__docgenInfo={description:"For components that should be aware of auth but not require it",displayName:"authaware",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/hocs/auth-aware/auth-aware.tsx#authaware"]={docgenInfo:authaware.__docgenInfo,name:"authaware",path:"src/components/hocs/auth-aware/auth-aware.tsx#authaware"})}catch(__react_docgen_typescript_loader_error){}var string_helper=__webpack_require__("./src/helpers/string-helper.tsx"),text_block=__webpack_require__("./src/components/text-block/text-block.tsx"),link_link=__webpack_require__("./src/components/elements/link/link.tsx"),loading_block=__webpack_require__("./src/components/elements/loading-block/loading-block.tsx"),use_on_pre_navigate=__webpack_require__("./src/hooks/use-on-pre-navigate.ts"),views={sv:{HOME:"hem",FRIENDS:"vanner",GIFTS:"presenter",LOGIN:"login",ORDERS:"ordrar",DISCOUNTS:"rabattkoder",PARKING:"parkering",PROFILE:"profil",BOOKING:"bokning",HANDLE_BOOKING:"hantera-biljetter",SEASON_PASSES:"sasongskort",SMART_WRISTBANDS:"smarta-armband",SMART_WRISTBANDS_BLOCK:"".concat("smarta-armband","/sparra"),SMART_WRISTBANDS_RECAP:"".concat("smarta-armband","/summering"),TICKETS:"biljetter",CHANGE_VISIT_DATE:"".concat("hantera-biljetter","/andra-besoksdag"),CHANGE_JETPASS:"".concat("hantera-biljetter","/andra-jetpass"),OBLITERATE_TICKETS:"".concat("hantera-biljetter","/avboka"),HANDLE_ACTIVITY_PASSES:"hantera-aktiviteter",CHANGE_ACTIVITY_PASS_DATE:"".concat("hantera-aktiviteter","/andra-dag"),CHANGE_ACTIVITY_PASS_TIME:"".concat("hantera-aktiviteter","/andra-tid"),RECEIVE_GIFT:"".concat("hantera-produkter","/ta-emot-produkt"),GIVE_AWAY_TICKET_HISTORY:"".concat("hantera-produkter","/").concat("ge-bort-produkt","/historik"),GIVE_AWAY_TICKET:"".concat("hantera-produkter","/").concat("ge-bort-produkt"),RECEIVE_SHARING:"".concat("hantera-produkter","/ta-emot-delning"),SHARE_PRODUCTS:"dela-produkter",SIGNUP:"registrera-konto"},en:{HOME:"home",FRIENDS:"friends",GIFTS:"gifts",LOGIN:"login",ORDERS:"orders",DISCOUNTS:"discounts",PARKING:"parking",PROFILE:"profile",BOOKING:"booking",HANDLE_BOOKING:"handle-tickets",SEASON_PASSES:"season-passes",SMART_WRISTBANDS:"smart-wristbands",SMART_WRISTBANDS_BLOCK:"".concat("smart-wristbands","/block"),SMART_WRISTBANDS_RECAP:"".concat("smart-wristbands","/recap"),TICKETS:"tickets",CHANGE_VISIT_DATE:"".concat("handle-tickets","/change-visit-date"),CHANGE_JETPASS:"".concat("handle-tickets","/change-jetpass"),OBLITERATE_TICKETS:"".concat("handle-tickets","/cancel"),HANDLE_ACTIVITY_PASSES:"handle-activities",CHANGE_ACTIVITY_PASS_DATE:"".concat("handle-activities","/change-date"),CHANGE_ACTIVITY_PASS_TIME:"".concat("handle-activities","/change-time"),RECEIVE_GIFT:"".concat("handle-products","/receive-product"),GIVE_AWAY_TICKET_HISTORY:"".concat("handle-products","/").concat("give-away-product","/history"),GIVE_AWAY_TICKET:"".concat("handle-products","/").concat("give-away-product"),RECEIVE_SHARING:"".concat("handle-products","/receive-sharing"),SHARE_PRODUCTS:"share-products",SIGNUP:"register-account"}},basePath={sv:"/mina-sidor",en:"/en/my-pages"},sitePath={sv:"/",en:"/en"},routes_getSitePath=function getSitePath(){return"".concat(sitePath[language_helper.Z.getCurrentLocale()])},routes_LOGIN={getSlug:function getSlug(language){return language?"".concat(basePath[language],"/").concat(views[language].LOGIN):"".concat(basePath[language_helper.Z.getCurrentLocale()],"/").concat(views[language_helper.Z.getCurrentLocale()].LOGIN)},getShort:function getShort(){return views[language_helper.Z.getCurrentLocale()].LOGIN}},modal=__webpack_require__("./src/components/elements/modal/modal.tsx"),modal_portal=__webpack_require__("./src/components/shared-components/modal-portal/modal-portal.tsx");function page_lock_typeof(o){return page_lock_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},page_lock_typeof(o)}function page_lock_toConsumableArray(arr){return function page_lock_arrayWithoutHoles(arr){if(Array.isArray(arr))return page_lock_arrayLikeToArray(arr)}(arr)||function page_lock_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||page_lock_unsupportedIterableToArray(arr)||function page_lock_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function page_lock_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function page_lock_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?page_lock_ownKeys(Object(t),!0).forEach((function(r){page_lock_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):page_lock_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function page_lock_defineProperty(obj,key,value){return(key=function page_lock_toPropertyKey(t){var i=function page_lock_toPrimitive(t,r){if("object"!=page_lock_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=page_lock_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==page_lock_typeof(i)?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function page_lock_slicedToArray(arr,i){return function page_lock_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function page_lock_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||page_lock_unsupportedIterableToArray(arr,i)||function page_lock_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function page_lock_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return page_lock_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?page_lock_arrayLikeToArray(o,minLen):void 0}}function page_lock_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var PageLockModal=function PageLockModal(_ref){var children=_ref.children;return(0,jsx_runtime.jsx)(modal.u,{isOpen:!0,onClose:function onClose(){},isClosable:!1,portalId:modal_portal.Wr,innerClassName:page_lock_page_lock_module.modalInner,disableScrollClassName:"overflow-hidden",blurBackground:!0,children})};PageLockModal.displayName="PageLockModal";var CodeLock=function CodeLock(_ref2){var code=_ref2.code,lockInputLabel=_ref2.lockInputLabel,lockInputPlaceholder=_ref2.lockInputPlaceholder,lockErrorMsg=_ref2.lockErrorMsg,hasPassed=_ref2.hasPassed,cacheCode=_ref2.cacheCode,setHasPassed=_ref2.setHasPassed,setIsViewportScrollable=_ref2.setIsViewportScrollable,isDisabled=_ref2.isDisabled,bottomText=_ref2.bottomText,Component=_ref2.Component,props=_ref2.props,t=(0,es.$G)().t,initialCodeForm=(0,form_builder.HA)();initialCodeForm.fields.set("code",(0,form_builder.DM)("code",{isRequired:!0,errorText:lockErrorMsg,label:null!=lockInputLabel?lockInputLabel:t("promoCode"),placeholder:null!=lockInputPlaceholder?lockInputPlaceholder:t("inputPlaceholderPromoCode")}));var _useForm2=page_lock_slicedToArray((0,form_builder.cI)(initialCodeForm),3),codeForm=_useForm2[0],isCodeFormValid=_useForm2[1],codeFormOnChange=_useForm2[2];(0,react.useEffect)((function(){if(setIsViewportScrollable(!1),window&&window.scrollTo(0,0),cacheCode&&"undefined"!=typeof location){var value=local_storage_helper.Z.getItem("pageLock:".concat(JSON.stringify(location.pathname)));code.toUpperCase()===value&&setHasPassed(!0)}return function(){setIsViewportScrollable(!0)}}),[]),(0,react.useEffect)((function(){hasPassed&&setIsViewportScrollable(!0)}),[hasPassed,setIsViewportScrollable]);var submitCode=function submitCode(){var _codeForm$fields$get$,_codeForm$fields$get,value=null!==(_codeForm$fields$get$=null===(_codeForm$fields$get=codeForm.fields.get("code"))||void 0===_codeForm$fields$get?void 0:_codeForm$fields$get.value)&&void 0!==_codeForm$fields$get$?_codeForm$fields$get$:"",isValid=code.toUpperCase()===value;codeFormOnChange("code",value,{isValid}),isValid&&(setHasPassed(!0),cacheCode&&"undefined"!=typeof location&&local_storage_helper.Z.setItem("pageLock:".concat(JSON.stringify(location.pathname)),value,dayjs_min_default()().add(1,"day").startOf("day").add(4,"hours").valueOf()))};return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(PageLockModal,{children:(0,jsx_runtime.jsxs)("div",{className:page_lock_page_lock_module.content,children:[(0,jsx_runtime.jsx)(input_field.Z,{focus:!0,className:page_lock_page_lock_module.input,formField:codeForm.fields.get("code"),onChange:function onChange(_fieldName,value){return function onInputChange(value){var valueUpperCase=value.toUpperCase();codeFormOnChange("code",valueUpperCase,{instantValidate:!0})}(value)},onKeyDown:function handleKeyDown(e){"Enter"===e.key&&submitCode()},isDisabled}),(0,jsx_runtime.jsx)(parks_button.KM,{className:page_lock_page_lock_module.button,isFullWidth:!0,isDisabled:!isCodeFormValid||isDisabled,label:t("activate"),onClick:submitCode}),bottomText&&(0,jsx_runtime.jsx)("p",{children:bottomText})]})}),(0,jsx_runtime.jsx)(Component,page_lock_objectSpread({isLocked:!0},props))]})};CodeLock.displayName="CodeLock";var ReferrerLock=function ReferrerLock(_ref3){var validReferrer=_ref3.validReferrer,lockErrorMsg=_ref3.lockErrorMsg,setHasPassed=_ref3.setHasPassed,setIsViewportScrollable=_ref3.setIsViewportScrollable,Component=_ref3.Component,props=_ref3.props;return(0,react.useEffect)((function(){var referrer=document.referrer,validReferrers=validReferrer.split(";").map((function(r){return r.trim()}));return referrer&&validReferrers.some((function(valid){return referrer.includes(valid)}))?setHasPassed(!0):(window&&window.scrollTo(0,0),setIsViewportScrollable(!1)),function(){setIsViewportScrollable(!0)}}),[]),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(PageLockModal,{children:(0,jsx_runtime.jsx)("div",{className:page_lock_page_lock_module.content,children:(0,jsx_runtime.jsx)("p",{className:page_lock_page_lock_module.error,children:lockErrorMsg})})}),(0,jsx_runtime.jsx)(Component,page_lock_objectSpread({isLocked:!0},props))]})};ReferrerLock.displayName="ReferrerLock";var LocationParametersLock=function LocationParametersLock(_ref4){var _ref4$locationParamet=_ref4.locationParameters,locationParameters=void 0===_ref4$locationParamet?"":_ref4$locationParamet,validPromoCode=_ref4.validPromoCode,lockErrorMsg=_ref4.lockErrorMsg,setHasPassed=_ref4.setHasPassed,setIsViewportScrollable=_ref4.setIsViewportScrollable,Component=_ref4.Component,props=_ref4.props;return(0,react.useEffect)((function(){var promoParameterPair=locationParameters.substring(1).split("&").find((function(parameterPair){return"promo"===parameterPair.split("=")[0]}));return(promoParameterPair&&promoParameterPair.split("=")[1])===validPromoCode?setHasPassed(!0):(window&&window.scrollTo(0,0),setIsViewportScrollable(!1)),function(){setIsViewportScrollable(!0)}}),[]),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(PageLockModal,{children:(0,jsx_runtime.jsx)("div",{className:page_lock_page_lock_module.content,children:(0,jsx_runtime.jsx)("p",{className:page_lock_page_lock_module.error,children:lockErrorMsg})})}),(0,jsx_runtime.jsx)(Component,page_lock_objectSpread({isLocked:!0},props))]})};LocationParametersLock.displayName="LocationParametersLock";var productHasProductData=function productHasProductData(p){return void 0!==p.productData},MyPageLock=function MyPageLock(_ref5){var necessaryProducts=_ref5.necessaryProducts,blockingProducts=_ref5.blockingProducts,lockMyPageMessageNotNecessaryProducts=_ref5.lockMyPageMessageNotNecessaryProducts,lockMyPageMessageBlockingProducts=_ref5.lockMyPageMessageBlockingProducts,lockMyPageMessageNotLoggedIn=_ref5.lockMyPageMessageNotLoggedIn,auth=_ref5.auth,setHasPassed=_ref5.setHasPassed,Component=_ref5.Component,props=_ref5.props,t=(0,es.$G)().t,homeRoute=routes_getSitePath(),lockState=(0,react.useMemo)((function(){if(void 0===auth||auth.isFetchingSession||auth.isFetchingProducts||!auth.sessionFetched)return"LOADING";if(!auth.isLoggedIn&&auth.sessionFetched)return"NOT_LOGGED_IN";if(auth.isLoggedIn){var _auth$webOrders$flatM,_auth$looseRows$filte,productIdsOnAccount=new Set([].concat(page_lock_toConsumableArray(null!==(_auth$webOrders$flatM=auth.webOrders.flatMap((function(webOrder){return webOrder.rows.filter((function(row){return row.allowedActions.bonusCode.isAllowed})).map((function(row){return row.productId}))})))&&void 0!==_auth$webOrders$flatM?_auth$webOrders$flatM:[]),page_lock_toConsumableArray(null!==(_auth$looseRows$filte=auth.looseRows.filter((function(looseRow){return looseRow.allowedActions.bonusCode.isAllowed})).map((function(looseRow){return looseRow.productId})))&&void 0!==_auth$looseRows$filte?_auth$looseRows$filte:[]))),hasNecessaryProductsOnAccount=!(0,array_helper.Of)(necessaryProducts)||necessaryProducts.filter(productHasProductData).some((function(product){return productIdsOnAccount.has(parseInt(product.productData.glkId))}));return blockingProducts.filter(productHasProductData).some((function(product){return productIdsOnAccount.has(parseInt(product.productData.glkId))}))?"LOGGED_IN_BLOCKING_PRODUCT":hasNecessaryProductsOnAccount?"LOGGED_IN_NECESSARY_PRODUCTS":"LOGGED_IN_NOT_NECESSARY_PRODUCTS"}return"ERROR"}),[auth,necessaryProducts,blockingProducts]);(0,react.useEffect)((function(){"LOGGED_IN_NECESSARY_PRODUCTS"===lockState&&setHasPassed(!0)}),[lockState,setHasPassed]);var onClickLoginLink=(0,use_on_pre_navigate.W)((function(){return location_helper.Z.setPostMyParksLogin(window.location.pathname)}));return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(PageLockModal,{children:(0,jsx_runtime.jsxs)("div",{className:(0,string_helper.JC)(page_lock_page_lock_module.content,page_lock_page_lock_module.biggerContent),children:["LOADING"===lockState&&(0,jsx_runtime.jsx)(loading_block.B,{className:page_lock_page_lock_module.loader}),"NOT_LOGGED_IN"===lockState&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[lockMyPageMessageNotLoggedIn&&(0,jsx_runtime.jsx)(text_block.a,page_lock_objectSpread(page_lock_objectSpread({},lockMyPageMessageNotLoggedIn),{},{size:"m"})),(0,jsx_runtime.jsx)(link_link.Z,{internalLink:routes_LOGIN.getSlug(language_helper.Z.getCurrentLocale()),onClick:onClickLoginLink,children:(0,jsx_runtime.jsx)(parks_button.KM,{label:t("login"),isFullWidth:!0})})]}),"LOGGED_IN_NECESSARY_PRODUCTS"===lockState&&(0,jsx_runtime.jsx)("p",{children:t("myPageLockSuccess")}),"LOGGED_IN_BLOCKING_PRODUCT"===lockState&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[lockMyPageMessageBlockingProducts&&(0,jsx_runtime.jsx)(text_block.a,page_lock_objectSpread(page_lock_objectSpread({},lockMyPageMessageBlockingProducts),{},{size:"m"})),!lockMyPageMessageBlockingProducts&&(0,jsx_runtime.jsx)("p",{children:t("myPageLockBlockingProducts")})]}),"LOGGED_IN_NOT_NECESSARY_PRODUCTS"===lockState&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[lockMyPageMessageNotNecessaryProducts&&(0,jsx_runtime.jsx)(text_block.a,page_lock_objectSpread(page_lock_objectSpread({},lockMyPageMessageNotNecessaryProducts),{},{size:"m"})),!lockMyPageMessageNotNecessaryProducts&&(0,jsx_runtime.jsx)("p",{children:t("myPageLockNotEnoughProducts")})]}),"ERROR"===lockState&&(0,jsx_runtime.jsx)("p",{children:t("somethingWentWrong")}),(0,jsx_runtime.jsx)(parks_button.fS,{label:t("backToLandingPage"),url:homeRoute,isFullWidth:!0,className:page_lock_page_lock_module.myPageLockHomeButton})]})}),(0,jsx_runtime.jsx)(Component,page_lock_objectSpread({isLocked:!0},props))]})};MyPageLock.displayName="MyPageLock";var MyPageLockWithAuth=auth_aware(MyPageLock),getDateTimeLockParagraph=function getDateTimeLockParagraph(t,dateTimeLockAsUTC){return t("dateTimeLockMessageParagraph",["".concat(date_helper.ZP.toStringMMDDWeekday(dateTimeLockAsUTC)," ").concat(date_helper.ZP.toStringTimeHHMM(dateTimeLockAsUTC))])},DateTimeNotYetPassedLock=function DateTimeNotYetPassedLock(_ref6){var dateTimeLockAsUTC=_ref6.dateTimeLockAsUTC,Component=_ref6.Component,props=_ref6.props,t=(0,es.$G)().t;return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(PageLockModal,{children:(0,jsx_runtime.jsxs)("div",{className:page_lock_page_lock_module.content,children:[(0,jsx_runtime.jsx)("p",{className:"bold",children:t("dateTimeLockMessageHeading")}),(0,jsx_runtime.jsx)("p",{className:page_lock_page_lock_module.error,children:getDateTimeLockParagraph(t,dateTimeLockAsUTC)})]})}),(0,jsx_runtime.jsx)(Component,page_lock_objectSpread({isLocked:!0},props))]})};DateTimeNotYetPassedLock.displayName="DateTimeNotYetPassedLock";var LockWithValue=function LockWithValue(_ref7){var props=_ref7.props,hasPassed=_ref7.hasPassed,setHasPassed=_ref7.setHasPassed,dateTimeLock=_ref7.dateTimeLock,Component=_ref7.Component,t=(0,es.$G)().t;return isCodeProps(props)?(0,jsx_runtime.jsx)(CodeLock,{code:props.lockValue,lockInputLabel:props.lockInputLabel,lockInputPlaceholder:props.lockInputPlaceholder,lockErrorMsg:props.lockErrorMsg,hasPassed,cacheCode:props.cacheCode,setHasPassed,setIsViewportScrollable:props.setIsViewportScrollable,isDisabled:!dateTimeLock.hasPassed,bottomText:dateTimeLock.hasPassed?void 0:getDateTimeLockParagraph(t,dateTimeLock.dateTimeLockAsUTC),Component,props}):isReferrerProps(props)?(0,jsx_runtime.jsx)(ReferrerLock,{validReferrer:props.lockValue,lockErrorMsg:props.lockErrorMsg,setHasPassed,setIsViewportScrollable:props.setIsViewportScrollable,Component,props}):isLocationParametersProps(props)?(0,jsx_runtime.jsx)(LocationParametersLock,{locationParameters:props.locationSearch,validPromoCode:props.lockValue,lockErrorMsg:props.lockErrorMsg,setHasPassed,setIsViewportScrollable:props.setIsViewportScrollable,Component,props}):isMyPageProps(props)?(0,jsx_runtime.jsx)(MyPageLockWithAuth,{necessaryProducts:props.lockNecessaryProducts,blockingProducts:props.lockBlockingProducts,lockMyPageMessageNotNecessaryProducts:props.lockMyPageMessageNotNecessaryProducts,lockMyPageMessageBlockingProducts:props.lockMyPageMessageBlockingProducts,lockMyPageMessageNotLoggedIn:props.lockMyPageMessageNotLoggedIn,setHasPassed,Component,props}):(0,jsx_runtime.jsx)(Component,page_lock_objectSpread({isLocked:!1},props))};LockWithValue.displayName="LockWithValue";var isCodeProps=function isCodeProps(props){return"Code"===props.lockType},isReferrerProps=function isReferrerProps(props){return"Referrer"===props.lockType},isLocationParametersProps=function isLocationParametersProps(props){return"Location Parameters"===props.lockType},isMyPageProps=function isMyPageProps(props){return"MyPage"===props.lockType},pageLock=function pageLock(Component){return function PageLockWrapper(props){var _useState2=page_lock_slicedToArray((0,react.useState)(!1),2),hasPassed=_useState2[0],setHasPassed=_useState2[1],dateTimeLockAsUTC=function getUTCTimeFromDateTimeLock(dateTimeLock){return date_helper.ZP.parseWallDateTimeToUTCDateTime(dateTimeLock,"Europe/Stockholm")}(props.dateTimeLock),hasDateTimePassed=!dateTimeLockAsUTC||date_helper.ZP.hasDatePassed(dateTimeLockAsUTC),hasDateTimeProps=!!dateTimeLockAsUTC;return(isCodeProps(props)||isReferrerProps(props)||isLocationParametersProps(props)||isMyPageProps(props))&&!hasPassed?(0,jsx_runtime.jsx)(LockWithValue,{props,hasPassed,setHasPassed,dateTimeLock:!hasDateTimePassed&&dateTimeLockAsUTC?{hasPassed:!1,dateTimeLockAsUTC}:{hasPassed:!0},Component}):hasDateTimeProps&&!hasDateTimePassed?(0,jsx_runtime.jsx)(DateTimeNotYetPassedLock,{dateTimeLockAsUTC,Component,props}):(0,jsx_runtime.jsx)(Component,page_lock_objectSpread({isLocked:!1},props))}};try{pageLock.displayName="pageLock",pageLock.__docgenInfo={description:"",displayName:"pageLock",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/hocs/page-lock/page-lock.tsx#pageLock"]={docgenInfo:pageLock.__docgenInfo,name:"pageLock",path:"src/components/hocs/page-lock/page-lock.tsx#pageLock"})}catch(__react_docgen_typescript_loader_error){}var dist=__webpack_require__("./node_modules/@storybook/testing-library/dist/index.mjs"),jest_dist=__webpack_require__("./node_modules/@storybook/jest/dist/index.mjs"),preview=__webpack_require__("./.storybook/preview.tsx"),labels=__webpack_require__("./src/labels/labels.ts");function page_lock_stories_typeof(o){return page_lock_stories_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},page_lock_stories_typeof(o)}function page_lock_stories_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function page_lock_stories_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?page_lock_stories_ownKeys(Object(t),!0).forEach((function(r){page_lock_stories_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):page_lock_stories_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function page_lock_stories_defineProperty(obj,key,value){return(key=function page_lock_stories_toPropertyKey(t){var i=function page_lock_stories_toPrimitive(t,r){if("object"!=page_lock_stories_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=page_lock_stories_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==page_lock_stories_typeof(i)?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function page_lock_stories_regeneratorRuntime(){page_lock_stories_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==page_lock_stories_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:"suspendedYield",p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(page_lock_stories_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function page_lock_stories_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function page_lock_stories_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){page_lock_stories_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){page_lock_stories_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}const page_lock_stories={title:"Elements/Page Lock",component:pageLock((function(){return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h1",{children:"Secret page!"}),(0,jsx_runtime.jsx)("p",{children:"Very hidden content"})]})})),decorators:[preview.withMockedDate],argTypes:preview.argTypesMockDate};var _play,_play2,_play3,_play4,trimmedTimeLockParagraphText=labels.Z.sv.dateTimeLockMessageParagraph.substring(0,labels.Z.sv.dateTimeLockMessageParagraph.length-"{{0}}".length),Primary={args:{mockedDate:new Date("2024-08-13T08:11:20.297Z"),lockType:"Code",lockValue:"hunter2",setIsViewportScrollable:function setIsViewportScrollable(){},lockErrorMsg:"Locked error message",lockInputLabel:void 0,lockInputPlaceholder:void 0}},DateTimeLockNotPassed={play:(_play=page_lock_stories_asyncToGenerator(page_lock_stories_regeneratorRuntime().mark((function _callee(_ref){var canvasElement,canvas;return page_lock_stories_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return canvasElement=_ref.canvasElement,_context.next=3,new Promise((function(resolve){return setTimeout(resolve,2e3)}));case 3:canvas=(0,dist.uh)(canvasElement),(0,jest_dist.l)(canvas.getByText(labels.Z.sv.dateTimeLockMessageHeading)).toBeInTheDocument();case 5:case"end":return _context.stop()}}),_callee)}))),function play(_x){return _play.apply(this,arguments)}),args:{dateTimeLock:"2024-08-01T18:00",mockedDate:new Date("2024-08-01T17:55:00.000+02:00")}},DateTimeLockHasPassed={play:(_play2=page_lock_stories_asyncToGenerator(page_lock_stories_regeneratorRuntime().mark((function _callee2(_ref2){var canvasElement,canvas;return page_lock_stories_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return canvasElement=_ref2.canvasElement,_context2.next=3,new Promise((function(resolve){return setTimeout(resolve,2e3)}));case 3:canvas=(0,dist.uh)(canvasElement),(0,jest_dist.l)(canvas.queryByText(labels.Z.sv.dateTimeLockMessageHeading)).toBeNull();case 5:case"end":return _context2.stop()}}),_callee2)}))),function play(_x2){return _play2.apply(this,arguments)}),args:{dateTimeLock:"2024-08-01T18:00",mockedDate:new Date("2024-08-01T18:01:00.000+02:00")}},CodeLockAndDateTimeLockNotPassed={play:(_play3=page_lock_stories_asyncToGenerator(page_lock_stories_regeneratorRuntime().mark((function _callee3(_ref3){var canvasElement,canvas;return page_lock_stories_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return canvasElement=_ref3.canvasElement,_context3.next=3,new Promise((function(resolve){return setTimeout(resolve,2e3)}));case 3:canvas=(0,dist.uh)(canvasElement),(0,jest_dist.l)(canvas.getByText(trimmedTimeLockParagraphText,{exact:!1})).toBeInTheDocument(),(0,jest_dist.l)(canvas.getByPlaceholderText(labels.Z.sv.inputPlaceholderPromoCode)).toBeDisabled();case 6:case"end":return _context3.stop()}}),_callee3)}))),function play(_x3){return _play3.apply(this,arguments)}),args:page_lock_stories_objectSpread(page_lock_stories_objectSpread({},Primary.args),DateTimeLockNotPassed.args)},CodeLockAndDateTimeLockHasPassed={play:(_play4=page_lock_stories_asyncToGenerator(page_lock_stories_regeneratorRuntime().mark((function _callee4(_ref4){var canvasElement,canvas;return page_lock_stories_regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return canvasElement=_ref4.canvasElement,_context4.next=3,new Promise((function(resolve){return setTimeout(resolve,2e3)}));case 3:return canvas=(0,dist.uh)(canvasElement),(0,jest_dist.l)(canvas.queryByText(trimmedTimeLockParagraphText,{exact:!1})).toBeNull(),_context4.next=7,new Promise((function(resolve){return setTimeout(resolve,1e3)}));case 7:return _context4.next=9,dist.mV.type(canvas.getByPlaceholderText("Skriv in din kampanjkod hr"),"hunter2");case 9:return _context4.next=11,dist.mV.tab();case 11:return _context4.next=13,dist.mV.keyboard("{Enter}");case 13:(0,jest_dist.l)(canvas.queryByText(labels.Z.sv.dateTimeLockMessageHeading)).toBeNull();case 14:case"end":return _context4.stop()}}),_callee4)}))),function play(_x4){return _play4.apply(this,arguments)}),args:page_lock_stories_objectSpread(page_lock_stories_objectSpread({},Primary.args),DateTimeLockHasPassed.args)},__namedExportsOrder=["Primary","DateTimeLockNotPassed","DateTimeLockHasPassed","CodeLockAndDateTimeLockNotPassed","CodeLockAndDateTimeLockHasPassed"];Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:'{\n  args: {\n    mockedDate: new Date("2024-08-13T08:11:20.297Z"),\n    lockType: "Code",\n    lockValue: "hunter2",\n    setIsViewportScrollable: () => {\n      return;\n    },\n    lockErrorMsg: "Locked error message",\n    lockInputLabel: undefined,\n    lockInputPlaceholder: undefined\n  }\n}',...Primary.parameters?.docs?.source}}},DateTimeLockNotPassed.parameters={...DateTimeLockNotPassed.parameters,docs:{...DateTimeLockNotPassed.parameters?.docs,source:{originalSource:'{\n  play: async ({\n    canvasElement\n  }) => {\n    await new Promise(resolve => setTimeout(resolve, 2_000));\n    const canvas = within(canvasElement);\n    expect(canvas.getByText(labels.sv.dateTimeLockMessageHeading)).toBeInTheDocument();\n  },\n  args: {\n    dateTimeLock: "2024-08-01T18:00",\n    //NOTE! This will always be in Europe/Stockholm timezone\n    mockedDate: new Date("2024-08-01T17:55:00.000+02:00") //An exact point in time using +2h offset\n  }\n}',...DateTimeLockNotPassed.parameters?.docs?.source}}},DateTimeLockHasPassed.parameters={...DateTimeLockHasPassed.parameters,docs:{...DateTimeLockHasPassed.parameters?.docs,source:{originalSource:'{\n  play: async ({\n    canvasElement\n  }) => {\n    await new Promise(resolve => setTimeout(resolve, 2_000));\n    const canvas = within(canvasElement);\n    expect(canvas.queryByText(labels.sv.dateTimeLockMessageHeading)).toBeNull();\n  },\n  args: {\n    dateTimeLock: "2024-08-01T18:00",\n    //NOTE! This will always be in Europe/Stockholm timezone\n    mockedDate: new Date("2024-08-01T18:01:00.000+02:00") //An exact point in time using +2h offset (Stockholm in summertime)\n  }\n}',...DateTimeLockHasPassed.parameters?.docs?.source}}},CodeLockAndDateTimeLockNotPassed.parameters={...CodeLockAndDateTimeLockNotPassed.parameters,docs:{...CodeLockAndDateTimeLockNotPassed.parameters?.docs,source:{originalSource:"{\n  play: async ({\n    canvasElement\n  }) => {\n    await new Promise(resolve => setTimeout(resolve, 2_000));\n    const canvas = within(canvasElement);\n    expect(canvas.getByText(trimmedTimeLockParagraphText, {\n      exact: false\n    })).toBeInTheDocument();\n    expect(canvas.getByPlaceholderText(labels.sv.inputPlaceholderPromoCode)).toBeDisabled();\n  },\n  args: {\n    ...Primary.args,\n    ...DateTimeLockNotPassed.args\n  }\n}",...CodeLockAndDateTimeLockNotPassed.parameters?.docs?.source}}},CodeLockAndDateTimeLockHasPassed.parameters={...CodeLockAndDateTimeLockHasPassed.parameters,docs:{...CodeLockAndDateTimeLockHasPassed.parameters?.docs,source:{originalSource:'{\n  play: async ({\n    canvasElement\n  }) => {\n    await new Promise(resolve => setTimeout(resolve, 2_000));\n    const canvas = within(canvasElement);\n    expect(canvas.queryByText(trimmedTimeLockParagraphText, {\n      exact: false\n    })).toBeNull();\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    await userEvent.type(canvas.getByPlaceholderText("Skriv in din kampanjkod hr"), "hunter2");\n    await userEvent.tab();\n    await userEvent.keyboard("{Enter}");\n    expect(canvas.queryByText(labels.sv.dateTimeLockMessageHeading)).toBeNull();\n  },\n  args: {\n    ...Primary.args,\n    ...DateTimeLockHasPassed.args\n  }\n}',...CodeLockAndDateTimeLockHasPassed.parameters?.docs?.source}}}},"?4f7e":()=>{}}]);