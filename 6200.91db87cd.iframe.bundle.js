/*! For license information please see 6200.91db87cd.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_parksandresorts_core=self.webpackChunk_parksandresorts_core||[]).push([[6200],{"./src/auth/auth-context.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{HD:()=>AuthContextProvider,Ah:()=>useAuthDispatch,F_:()=>useAuthState});var react=__webpack_require__("./node_modules/react/index.js"),auth_types=__webpack_require__("./src/types/auth-types.ts"),ProductTypes=function(ProductTypes){return ProductTypes.SEASON_PASS="SEASON_PASS",ProductTypes.ENTRY_TICKET="ENTRY_TICKET",ProductTypes.ATTRACTION_TICKET="ATTRACTION_TICKET",ProductTypes.STANDARD_PRODUCT="STANDARD_PRODUCT",ProductTypes.PARKING_PRODUCT="PARKING_PRODUCT",ProductTypes.ACTIVITY_PASS="ACTIVITY_PASS",ProductTypes.BOOKABLE_PRODUCT="BOOKABLE_PRODUCT",ProductTypes.SMART_WRISTBAND="SMART_WRISTBAND",ProductTypes}({}),product_store=__webpack_require__("./src/stores/product-store.ts"),array_helper=__webpack_require__("./src/helpers/array-helper.ts"),object_helper=__webpack_require__("./src/helpers/object-helper.ts"),date_helper=__webpack_require__("./src/helpers/date-helper.ts");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var initialAuthState={debugToggle:!1,user:void 0,antiCsrfToken:void 0,loginMethod:void 0,isLoggedIn:!1,cookieString:void 0,productsFetched:!1,isFetchingProducts:!1,productFetchFailed:!1,giftsFetched:!1,isFetchingGifts:!1,giftFetchFailed:!1,gifts:[],sessionFetched:!1,sessionFetchFailed:!1,isFetchingSession:!1,webOrders:[],looseRows:[],contactless:{visitors:[]},contactlessOrders:void 0,isFetchingContactlessOrders:!1,contactlessOrdersFetchFailed:!1,contactlessOrderDetails:{},savedPaymentMethod:null},entryTicketDateAscendingSort=function entryTicketDateAscendingSort(a,b){var _a$validity,_b$validity,aNotBefore=null===(_a$validity=a.validity)||void 0===_a$validity?void 0:_a$validity.notBefore,bNotBefore=null===(_b$validity=b.validity)||void 0===_b$validity?void 0:_b$validity.notBefore;return aNotBefore||bNotBefore?bNotBefore?aNotBefore?aNotBefore>bNotBefore?1:aNotBefore<bNotBefore?-1:0:1:-1:0},fillFromProduct=function fillFromProduct(productId,item,type){var _ref,_id,contentfulData=product_store.Z.getProductByGlkId(productId),productName=contentfulData?contentfulData.productName:void 0,id=null!==(_ref=null!==(_id=item.id)&&void 0!==_id?_id:item.visitorId)&&void 0!==_ref?_ref:void 0,template=item.template;return productName||(productName="productName"in item?item.productName:template?template.name:void 0),_objectSpread(_objectSpread(_objectSpread({},item),contentfulData),{},{id,productName,productType:type})},authReducer=function authReducer(state,action){switch(action.type){case auth_types.s.DEBUG:return _objectSpread(_objectSpread({},state),{},{debugToggle:!state.debugToggle});case auth_types.s.SESSION_CREATED:case auth_types.s.SESSION_UPDATED:return _objectSpread(_objectSpread(_objectSpread({},state),action.payload),{},{isFetchingSession:!1,sessionFetchFailed:!1,sessionFetched:!0});case auth_types.s.FETCH_SESSION_REQUEST:return _objectSpread(_objectSpread({},state),{},{isFetchingSession:!0});case auth_types.s.FETCH_SESSION_FAILURE:return _objectSpread(_objectSpread({},state),{},{isFetchingSession:!1,sessionFetchFailed:!0,sessionFetched:!0});case auth_types.s.SESSION_DELETED:return _objectSpread({},initialAuthState);case auth_types.s.POST_GIFTS_SUCCESS:var _state$entryTickets,_step,gifts=action.payload.giftResponse.gifts,allGiftedOrderRowIds=[],_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(gifts);try{for(_iterator.s();!(_step=_iterator.n()).done;){var giftedOrderRowIdsForGift=_step.value.rows.map((function(row){return row.webOrderRowId}));allGiftedOrderRowIds.push.apply(allGiftedOrderRowIds,_toConsumableArray(giftedOrderRowIdsForGift))}}catch(err){_iterator.e(err)}finally{_iterator.f()}var entryTicketsWithoutGifted=null===(_state$entryTickets=state.entryTickets)||void 0===_state$entryTickets?void 0:_state$entryTickets.filter((function(entryTicket){return!allGiftedOrderRowIds.includes(entryTicket.orderRowId)}));return _objectSpread(_objectSpread({},state),{},{entryTickets:entryTicketsWithoutGifted});case auth_types.s.FETCH_PRODUCTS_FAILURE:case auth_types.s.SERVER_ERROR:return _objectSpread(_objectSpread({},state),{},{isFetchingProducts:!1,productFetchFailed:!0});case auth_types.s.FETCH_PRODUCTS_REQUEST:return _objectSpread(_objectSpread({},state),{},{isFetchingProducts:!0});case auth_types.s.FETCH_PRODUCTS_SUCCESS:case auth_types.s.USER_PRODUCTS_UPDATED:var data=function populateItems(data){var activityPasses=data.activityPasses.map((function(item){return fillFromProduct(item.productId,item,ProductTypes.ACTIVITY_PASS)})),attractionTickets=data.attractionTickets.map((function(item){return _objectSpread({},fillFromProduct(item.productId,item,ProductTypes.ATTRACTION_TICKET))})),bookableProducts=data.bookableProducts.map((function(item){return _objectSpread({},fillFromProduct(item.productId,item,ProductTypes.BOOKABLE_PRODUCT))})),entryTickets=data.entryTickets.map((function(item){return _objectSpread({},fillFromProduct(item.productId,item,ProductTypes.ENTRY_TICKET))}));entryTickets.sort(entryTicketDateAscendingSort);var seasonPasses=data.seasonPasses.map((function(item){return _objectSpread(_objectSpread({},fillFromProduct(item.productId,item,ProductTypes.SEASON_PASS)),item)})),standardProducts=data.standardProducts.map((function(item){return _objectSpread({},fillFromProduct(item.productId,item,ProductTypes.STANDARD_PRODUCT))})),parkingProducts=data.parkingProducts.map((function(item){return _objectSpread({},fillFromProduct(item.productId,item,ProductTypes.PARKING_PRODUCT))})),reactivatableSeasonPasses=data.reactivatableSeasonPasses.map((function(item){return _objectSpread(_objectSpread({},fillFromProduct(item.productId,item,ProductTypes.SEASON_PASS)),item)})),smartWristbands=data.contactless.visitors.map((function(item){return _objectSpread(_objectSpread({},fillFromProduct(item.productId,item,ProductTypes.SMART_WRISTBAND)),item)})),contactless=_objectSpread(_objectSpread({},data.contactless),{},{visitors:smartWristbands}),webOrders=data.webOrders.map((function(item){return _objectSpread(_objectSpread({},item),{},{rows:item.rows.map((function(row){return fillFromProduct(row.productId,row)}))})})),looseRows=data.looseRows.map((function(item){return _objectSpread({},fillFromProduct(item.productId,item))}));return{activityPasses,attractionTickets,bookableProducts,entryTickets,parkingPermits:data.parkingPermits,seasonPasses,standardProducts,parkingProducts,reactivatableSeasonPasses,contactless,webOrders,looseRows}}(action.payload.userProducts);return _objectSpread(_objectSpread(_objectSpread({},state),data),{},{error:!1,productsFetched:!0,errorSource:null,productsFetchTime:action.payload.productsFetchTime,isFetchingProducts:!1,productFetchFailed:!1});case auth_types.s.CARD_REGISTERED:var _state$seasonPasses,filled=_objectSpread(_objectSpread(_objectSpread({},fillFromProduct(action.payload.registerCardResponse.productId,action.payload.registerCardResponse)),action.payload.registerCardResponse),{},{willBeActivated:!0}),itemIndex=null===(_state$seasonPasses=state.seasonPasses)||void 0===_state$seasonPasses?void 0:_state$seasonPasses.findIndex((function(seasonPass){return seasonPass.orderRowId===filled.orderRowId}));if(void 0===itemIndex)return _objectSpread({},state);var updatedSeasonPasses=state.seasonPasses?_toConsumableArray(state.seasonPasses):[];return itemIndex>-1?updatedSeasonPasses[itemIndex]=filled:updatedSeasonPasses.push(filled),_objectSpread(_objectSpread({},state),{},{seasonPasses:updatedSeasonPasses});case auth_types.s.CARD_BOOKING_SUCCESSFUL:if(!(0,array_helper.Of)(action.payload.bookings))return _objectSpread({},state);var initialValue=state.seasonPasses?_toConsumableArray(state.seasonPasses):[],_updatedSeasonPasses=action.payload.bookings.reduce((function(seasonPasses,newBooking){var itemIndex=seasonPasses.findIndex((function(seasonPass){return seasonPass.barcode===newBooking.barcode}));if(-1===itemIndex)return seasonPasses;var modifiedSeasonPasses=_toConsumableArray(seasonPasses),seasonPass=modifiedSeasonPasses[itemIndex];if(null===seasonPass.bookings||void 0===seasonPass.bookings)return seasonPass.bookings=newBooking.bookings,modifiedSeasonPasses;var productId=(0,object_helper.Kl)(action,"payload.productId");return seasonPass.bookings[productId]?(seasonPass.bookings[productId]=[].concat(_toConsumableArray(seasonPass.bookings[productId]),_toConsumableArray(newBooking.bookings[productId])),modifiedSeasonPasses):(seasonPass.bookings=_objectSpread(_objectSpread({},seasonPass.bookings),newBooking.bookings),modifiedSeasonPasses)}),initialValue);return _objectSpread(_objectSpread({},state),{},{seasonPasses:_updatedSeasonPasses});case auth_types.s.FETCH_GIFTS_REQUEST:return _objectSpread(_objectSpread({},state),{},{isFetchingGifts:!0});case auth_types.s.FETCH_GIFTS_SUCCESS:var giftsWithTrimmedDatesOnRow=action.payload.giftsResponse.gifts.map((function(gift){return _objectSpread(_objectSpread({},gift),{},{rows:gift.rows.map((function(row){return _objectSpread(_objectSpread({},row),{},{dateFrom:date_helper.ZP.toStringYYYYMMDD(row.dateFrom),dateTo:date_helper.ZP.toStringYYYYMMDD(row.dateTo)})}))})})),expandedGiftRows=giftsWithTrimmedDatesOnRow.map((function(gift){return _objectSpread(_objectSpread({},gift),{},{rows:gift.rows.map((function(row){var _ref2,_maybeProduct$product,maybeProduct=product_store.Z.getProductByGlkId(row.productId),newName=null!==(_ref2=null!==(_maybeProduct$product=null==maybeProduct?void 0:maybeProduct.productNameMyPages)&&void 0!==_maybeProduct$product?_maybeProduct$product:null==maybeProduct?void 0:maybeProduct.productName)&&void 0!==_ref2?_ref2:row.productName;return _objectSpread(_objectSpread({},row),{},{productName:null!=newName?newName:void 0,senderName:gift.senderName,createdAt:gift.createdAt,recipient:gift.recipient,message:gift.message})}))})}));return _objectSpread(_objectSpread({},state),{},{gifts:expandedGiftRows,giftsFetched:!0,isFetchingGifts:!1,giftFetchFailed:!1});case auth_types.s.FETCH_GIFTS_FAILURE:return _objectSpread(_objectSpread({},state),{},{giftsFetched:!1,isFetchingGifts:!1,giftFetchFailed:!0});case auth_types.s.FETCH_CONTACTLESS_SUMMARIES_REQUEST:return _objectSpread(_objectSpread({},state),{},{isFetchingContactlessOrders:!0});case auth_types.s.FETCH_CONTACTLESS_SUMMARIES_SUCCESS:return _objectSpread(_objectSpread({},state),{},{contactlessOrders:action.payload.response,isFetchingContactlessOrders:!1,contactlessOrdersFetchFailed:!1});case auth_types.s.FETCH_CONTACTLESS_SUMMARIES_FAILURE:return _objectSpread(_objectSpread({},state),{},{isFetchingContactlessOrders:!1,contactlessOrdersFetchFailed:!0});case auth_types.s.FETCH_CONTACTLESS_DETAILS_REQUEST:var _state$contactlessOrd,existingOrder=null!==(_state$contactlessOrd=state.contactlessOrderDetails[action.payload.orderId])&&void 0!==_state$contactlessOrd?_state$contactlessOrd:{};return _objectSpread(_objectSpread({},state),{},{contactlessOrderDetails:_objectSpread(_objectSpread({},state.contactlessOrderDetails),{},_defineProperty({},action.payload.orderId,_objectSpread(_objectSpread({},existingOrder),{},{isFetching:!0,fetchFailed:!1})))});case auth_types.s.FETCH_CONTACTLESS_DETAILS_SUCCESS:var _state$contactlessOrd2,_existingOrder=null!==(_state$contactlessOrd2=state.contactlessOrderDetails[action.payload.orderId])&&void 0!==_state$contactlessOrd2?_state$contactlessOrd2:{};return _objectSpread(_objectSpread({},state),{},{contactlessOrderDetails:_objectSpread(_objectSpread({},state.contactlessOrderDetails),{},_defineProperty({},action.payload.orderId,_objectSpread(_objectSpread({},_existingOrder),{},{isFetching:!1,fetchFailed:!1,order:action.payload.response})))});case auth_types.s.FETCH_CONTACTLESS_DETAILS_FAILURE:var _state$contactlessOrd3,_existingOrder2=null!==(_state$contactlessOrd3=state.contactlessOrderDetails[action.payload.orderId])&&void 0!==_state$contactlessOrd3?_state$contactlessOrd3:{};return _objectSpread(_objectSpread({},state),{},{contactlessOrderDetails:_objectSpread(_objectSpread({},state.contactlessOrderDetails),{},_defineProperty({},action.payload.orderId,_objectSpread(_objectSpread({},_existingOrder2),{},{isFetching:!1,fetchFailed:!0})))});case auth_types.s.CONTACTLESS_VISITORS_UPDATED:var updatedVisitor=action.payload.visitor;if(!state.contactless.visitors.find((function(visitor){return visitor.visitorId===updatedVisitor.visitorId})))return _objectSpread({},state);var updatedVisitors=state.contactless.visitors.map((function(visitor){return visitor.visitorId===updatedVisitor.visitorId?updatedVisitor:visitor}));return _objectSpread(_objectSpread({},state),{},{contactless:{visitors:updatedVisitors}});case auth_types.s.SET_CONTACTLESS_VISITORS:var smartWristbands=Object.values(action.payload).filter((function(item){return void 0!==item})).map((function(item){return _objectSpread(_objectSpread({},fillFromProduct(item.productId,item,ProductTypes.SMART_WRISTBAND)),item)}));return smartWristbands.some((function(smartWristband){var correspondingVisitor=state.contactless.visitors.find((function(visitor){return visitor.visitorId===smartWristband.visitorId}));return!correspondingVisitor||JSON.stringify(smartWristband)!==JSON.stringify(correspondingVisitor)}))?_objectSpread(_objectSpread({},state),{},{contactless:{visitors:smartWristbands}}):state;case auth_types.s.SET_SAVED_PAYMENT_METHOD:return _objectSpread(_objectSpread({},state),{},{savedPaymentMethod:action.payload});default:return(0,object_helper.y0)(action)}},myparks_service=__webpack_require__("./src/services/myparks-service.ts"),js_cookie=__webpack_require__("./node_modules/js-cookie/dist/js.cookie.mjs");function auth_action_middleware_typeof(o){return auth_action_middleware_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},auth_action_middleware_typeof(o)}function auth_action_middleware_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function auth_action_middleware_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?auth_action_middleware_ownKeys(Object(t),!0).forEach((function(r){auth_action_middleware_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):auth_action_middleware_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function auth_action_middleware_defineProperty(obj,key,value){return(key=function auth_action_middleware_toPropertyKey(t){var i=function auth_action_middleware_toPrimitive(t,r){if("object"!=auth_action_middleware_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=auth_action_middleware_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==auth_action_middleware_typeof(i)?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var saveAntiCsrfTokenToHelper=function saveAntiCsrfTokenToHelper(action){return myparks_service.Z.updateAuth(action.payload),action},saveSessionAsCookie=function saveSessionAsCookie(action){var cookieString=(0,object_helper.Kl)(action,"payload.cookieString",void 0);if(cookieString){var date=(0,date_helper.Bq)(),expire=(0,date_helper.Bq)(date.setFullYear(date.getFullYear()+10));js_cookie.Z.set("session",cookieString,{expires:expire,path:"/"})}return action},middlewareMap=new Map;middlewareMap.set(auth_types.s.DEBUG,[function addDebugTimeStamp(action){return function actionHasPayload(action){return"payload"in action}(action)?(action.payload=auth_action_middleware_objectSpread(auth_action_middleware_objectSpread({},action.payload),{},{debugDate:(0,date_helper.Bq)()}),action):action}]).set(auth_types.s.SESSION_CREATED,[saveAntiCsrfTokenToHelper,saveSessionAsCookie]).set(auth_types.s.SESSION_UPDATED,[saveAntiCsrfTokenToHelper,saveSessionAsCookie]).set(auth_types.s.SESSION_DELETED,[function removeSessionCookie(action){return js_cookie.Z.remove("session",{path:"/"}),action}]).set(auth_types.s.USER_PRODUCTS_UPDATED,[function saveFetchTimeStamp(action){var now=(0,date_helper.Bq)();return auth_action_middleware_objectSpread(auth_action_middleware_objectSpread({},action),{},{payload:auth_action_middleware_objectSpread(auth_action_middleware_objectSpread({},action.payload),{},{productsFetchTime:date_helper.ZP.toStringTimeYYYYMMDDHHMM(now)})})}]);const auth_action_middleware=function actionMiddleware(action){var middlewaresForType=middlewareMap.get(action.type);return middlewaresForType?middlewaresForType.reduce((function(prevAction,middleware){return middleware(prevAction)}),action):action};var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function auth_context_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return auth_context_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return auth_context_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function auth_context_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var AuthContext=react.createContext(initialAuthState),AuthDispatchContext=react.createContext((function(){})),reducerWithMiddleWare=(AuthDispatchContext.Consumer,AuthContext.Consumer,function reducerWithMiddleWare(state,action){return action=auth_action_middleware(action),authReducer(state,action)}),AuthContextProvider=function AuthContextProvider(_ref){var children=_ref.children,_React$useReducer2=_slicedToArray(react.useReducer(reducerWithMiddleWare,initialAuthState),2),state=_React$useReducer2[0],dispatch=_React$useReducer2[1];return(0,jsx_runtime.jsx)(AuthContext.Provider,{value:state,children:(0,jsx_runtime.jsx)(AuthDispatchContext.Provider,{value:dispatch,children})})};AuthContextProvider.displayName="AuthContextProvider";var useAuthState=function useAuthState(){var context=react.useContext(AuthContext);if(void 0===context)throw new Error("useAuthState must be used within a AuthProvider");return context},useAuthDispatch=function useAuthDispatch(){var context=react.useContext(AuthDispatchContext);if(void 0===context)throw new Error("useAuthDispatch must be used within a AuthProvider");return context};try{Context.displayName="Context",Context.__docgenInfo={description:"Context lets components pass information deep down without explicitly\npassing props.\n\nCreated from {@link createContext}",displayName:"Context",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/auth/auth-context.tsx#Context"]={docgenInfo:Context.__docgenInfo,name:"Context",path:"src/auth/auth-context.tsx#Context"})}catch(__react_docgen_typescript_loader_error){}try{AuthContextProvider.displayName="AuthContextProvider",AuthContextProvider.__docgenInfo={description:"",displayName:"AuthContextProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/auth/auth-context.tsx#AuthContextProvider"]={docgenInfo:AuthContextProvider.__docgenInfo,name:"AuthContextProvider",path:"src/auth/auth-context.tsx#AuthContextProvider"})}catch(__react_docgen_typescript_loader_error){}},"./src/helpers/local-storage-helper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _date_helper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/date-helper.ts");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:String(i)}const __WEBPACK_DEFAULT_EXPORT__=new(function(){function LocalStorageHelper(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LocalStorageHelper)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(LocalStorageHelper,[{key:"isLocalStorageAvailable",value:function isLocalStorageAvailable(){try{localStorage.isAvailable=!0}catch(e){return!1}return"undefined"!=typeof window}},{key:"setItem",value:function setItem(key,value,timestamp){if(this.isLocalStorageAvailable()&&key&&value){timestamp&&(value={value,localStorageItemValidUntil:timestamp}),"object"===_typeof(value)&&(value=JSON.stringify(value));try{return localStorage.setItem(key,value),null}catch(e){return console.error('Error setting localStorage item for key "'.concat(key,'":'),e),e}}}},{key:"isTimeStampValid",value:function isTimeStampValid(timestamp){return!_date_helper__WEBPACK_IMPORTED_MODULE_0__.ZP.hasDatePassed(timestamp)}},{key:"getItem",value:function getItem(key){if(this.isLocalStorageAvailable()){var value=localStorage.getItem(key);if(value){if("{"===value[0]||"["===value[0])try{value=JSON.parse(value)}catch(e){return void console.error('Error parsing localStorage item for key "'.concat(key,'":'),e)}return value&&!value.localStorageItemValidUntil?value:this.valueTimeStampValidation(value,key)}}}},{key:"getValidUntilTimeStamp",value:function getValidUntilTimeStamp(key){if(this.isLocalStorageAvailable()){var value=localStorage.getItem(key);if(value&&("{"!==value[0]&&"["!==value[0]||(value=JSON.parse(value)),!value||value.localStorageItemValidUntil))return value.localStorageItemValidUntil}}},{key:"valueTimeStampValidation",value:function valueTimeStampValidation(value,key){return this.isTimeStampValid(value.localStorageItemValidUntil)?value.value:void this.removeItem(key)}},{key:"removeItem",value:function removeItem(key){this.isLocalStorageAvailable()&&localStorage.removeItem(key)}}]),LocalStorageHelper}())},"./src/services/myparks-service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/axios/lib/axios.js"),_parksandresorts_myparks_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@parksandresorts/myparks-types/dist/src/index.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:"suspendedYield",p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:String(i)}const __WEBPACK_DEFAULT_EXPORT__=new(function(){function MyParksService(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MyParksService),_defineProperty(this,"url",null),_defineProperty(this,"company",null),_defineProperty(this,"language","sv"),_defineProperty(this,"antiCsrfToken",null)}var _fetch2,_authorizedFetchWithPlainResponse2,_authorizedFetch2,_getContactlessOrders;return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(MyParksService,[{key:"updateAuth",value:function updateAuth(auth){auth&&auth.antiCsrfToken&&(this.antiCsrfToken=auth.antiCsrfToken)}},{key:"init",value:function init(language,apiUrl,apiCompany){this.language=language,this.url=apiUrl,this.company=apiCompany}},{key:"initiateSession",value:function initiateSession(identifier,isAutoLoginToken){var identify=isAutoLoginToken?{autoLoginToken:identifier}:{identifier};return this._authorizedFetch("session/pin","POST",{body:identify})}},{key:"postVerificationCode",value:function postVerificationCode(code){var postBody={pin:code};return this._authorizedFetch("session/pin/validate","POST",{body:postBody})}},{key:"fetchSession",value:function fetchSession(){return this._authorizedFetch("session","GET")}},{key:"deleteSession",value:function deleteSession(){return this._authorizedFetch("session","DELETE")}},{key:"getSessionCookie",value:function getSessionCookie(){return document.cookie.replace(/(?:(?:^|.*;\s*)session\s*=\s*([^;]*).*$)|^.*$/,"$1")}},{key:"getContactlessVisitors",value:function getContactlessVisitors(){return this._authorizedFetchWithPlainResponse("".concat("contactless","/visitors"),"GET")}},{key:"getValidateContactlessVisitorTag",value:function getValidateContactlessVisitorTag(requestId){return this._authorizedFetchWithPlainResponse("".concat("contactless","/tag/").concat(requestId),"GET")}},{key:"postRegisterContactlessVisitorTag",value:function postRegisterContactlessVisitorTag(visitorId,requestBody){return this._authorizedFetchWithPlainResponse("".concat("contactless","/visitor/").concat(visitorId,"/registerTag"),"POST",{body:requestBody})}},{key:"updateContactlessVisitor",value:function updateContactlessVisitor(visitorId,updatedFieldsBody){return this._authorizedFetchWithPlainResponse("".concat("contactless","/visitor/").concat(visitorId),"PATCH",{body:updatedFieldsBody})}},{key:"blockContactlessTag",value:function blockContactlessTag(shortIds){var reason=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_parksandresorts_myparks_types__WEBPACK_IMPORTED_MODULE_0__.rh.GOING_HOME,comment=arguments.length>2?arguments[2]:void 0,requestBody={reason,shortIds,comment};return this._authorizedFetchWithPlainResponse("".concat("contactless","/tags"),"DELETE",{body:requestBody})}},{key:"getContactlessPaymentMethod",value:function getContactlessPaymentMethod(){return this._authorizedFetchWithPlainResponse("".concat("contactless","/savedPaymentMethod"),"GET")}},{key:"updateContactlessPaymentMethod",value:function updateContactlessPaymentMethod(){return this._authorizedFetchWithPlainResponse("".concat("contactless","/savedPaymentMethod"),"PUT",{body:{paymentProvider:"Nets"}})}},{key:"getContactlessOrders",value:(_getContactlessOrders=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this._authorizedFetchWithPlainResponse("".concat("contactless","/orders"),"GET");case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee,this)}))),function getContactlessOrders(){return _getContactlessOrders.apply(this,arguments)})},{key:"getContactlessOrderDetails",value:function getContactlessOrderDetails(orderId){return this._authorizedFetchWithPlainResponse("".concat("contactless","/order/").concat(orderId),"GET")}},{key:"getContactlessGamification",value:function getContactlessGamification(){return this._authorizedFetchWithPlainResponse("".concat("gamification/visitors-visits"),"GET")}},{key:"updateUser",value:function updateUser(userAltId,updatedUser){var endpoint="".concat("users","/").concat(userAltId);return this._authorizedFetch(endpoint,"PATCH",{body:updatedUser})}},{key:"fetchProducts",value:function fetchProducts(){return this._authorizedFetch("products","GET")}},{key:"acceptSharing",value:function acceptSharing(giftId,giftToken){return this.acceptGift(giftId,giftToken)}},{key:"cancelSharing",value:function cancelSharing(giftId){return this.cancelGift(giftId)}},{key:"addSharing",value:function addSharing(data){return this.sendGifts(data)}},{key:"removeSharing",value:function removeSharing(data){var endpoint="".concat("products/order-rows","/stop-sharing");return this._authorizedFetch(endpoint,"DELETE",{body:data})}},{key:"getSharedProducts",value:function getSharedProducts(){return this.getGifts()}},{key:"getSharedProduct",value:function getSharedProduct(productId,token){return this.getGift(productId,token)}},{key:"denySharedProduct",value:function denySharedProduct(productId,token){return this.denyGift(productId,token)}},{key:"getGift",value:function getGift(giftId,token){var endpoint="".concat("gifts","/").concat(giftId,"?token=").concat(token);return this._fetch(endpoint,"GET")}},{key:"sendGifts",value:function sendGifts(data){return this._authorizedFetch("gifts","POST",{body:data})}},{key:"getGifts",value:function getGifts(){var endpoint="".concat("gifts");return this._authorizedFetch(endpoint,"GET")}},{key:"acceptGift",value:function acceptGift(giftId,giftToken){var endpoint="".concat("gifts","/").concat(giftId,"?token=").concat(giftToken);return this._authorizedFetch(endpoint,"PATCH")}},{key:"cancelGift",value:function cancelGift(giftId){var endpoint="".concat("gifts","/").concat(giftId);return this._authorizedFetch(endpoint,"DELETE")}},{key:"denyGift",value:function denyGift(giftId,giftToken){var endpoint="".concat("gifts","/").concat(giftId,"?token=").concat(giftToken);return this._fetch(endpoint,"DELETE")}},{key:"registerCard",value:function registerCard(orderRowId,user){var endpoint="".concat("products/order-rows","/").concat(orderRowId,"/season-pass-v2");return this._authorizedFetch(endpoint,"POST",{body:user})}},{key:"registerFreeParking",value:function registerFreeParking(orderRowId,licenseNumber){var endpoint="".concat("products/order-rows","/").concat(orderRowId,"/free-parking");return this._authorizedFetch(endpoint,"POST",{body:{vrm:licenseNumber}})}},{key:"rebookOrderRows",value:function rebookOrderRows(bookingData){var endpoint="".concat("weborders/datetime");return this._authorizedFetch(endpoint,"PATCH",{body:bookingData})}},{key:"rebookQueuePassesForOrderRows",value:function rebookQueuePassesForOrderRows(bookingData){var endpoint="".concat("weborders/queuepass");return this._authorizedFetch(endpoint,"PATCH",{body:bookingData})}},{key:"requestRefundSummary",value:function requestRefundSummary(orderType,orderNo,orderRows){var endpoint="".concat("products","/orders/").concat(orderType,"/").concat(orderNo,"/refund-summary");return this._authorizedFetch(endpoint,"POST",{body:orderRows})}},{key:"refundOrderRows",value:function refundOrderRows(orderType,orderNo,orderRows,finalRefundAmount){var bodyObject={finalRefundAmount,rows:orderRows},endpoint="".concat("products","/orders/").concat(orderType,"/").concat(orderNo,"/refund");return this._authorizedFetch(endpoint,"PATCH",{body:bodyObject})}},{key:"bookPassesForCards",value:function bookPassesForCards(cards){return this._authorizedFetch("queuepasses","POST",{body:cards})}},{key:"postContactInformationForVerification",value:function postContactInformationForVerification(contactInformation){return this._fetch("contact-verification","POST",{body:contactInformation})}},{key:"getContactVerification",value:function getContactVerification(contactInformation,pinCode){var endpoint="".concat("contact-verification","?contact=").concat(contactInformation,"&code=").concat(pinCode);return this._fetch(endpoint,"GET")}},{key:"registerUser",value:function registerUser(account,verificationCode){var body={account,contactVerificationToken:verificationCode};return this._authorizedFetch("users","POST",{body})}},{key:"buildErrorResponse",value:function buildErrorResponse(error){throw error.response?{data:_objectSpread({},error.response.data),status:error.response.status}:error.request?{data:{statusCode:503,success:!1,errors:[]},status:503}:{data:{statusCode:400,success:!1,errors:[]},status:400}}},{key:"_baseAuthorizedFetch",value:function _baseAuthorizedFetch(endpoint,method){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.url&&this.company){var body=options.body?options.body:null,contentType=options.contentType?options.contentType:"application/json",url="".concat(this.url,"/").concat(endpoint);return(0,axios__WEBPACK_IMPORTED_MODULE_1__.Z)({method,url,headers:{"X-Company":this.company,"X-Language":this.language,"X-Cookie":this.getSessionCookie(),"X-AntiCsrfToken":this.antiCsrfToken,"content-type":contentType},data:body,withCredentials:!0})}console.error("MyParksService is missing configuration. Current configuration url: ".concat(this.url," and company: ").concat(this.company))}},{key:"_authorizedFetch",value:(_authorizedFetch2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(endpoint,method){var options,response,_args2=arguments;return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return options=_args2.length>2&&void 0!==_args2[2]?_args2[2]:{},_context2.prev=1,_context2.next=4,this._baseAuthorizedFetch(endpoint,method,options);case 4:return response=_context2.sent,_context2.abrupt("return",_objectSpread(_objectSpread({},response.data.response),{},{cookieString:response.headers["x-cookie"]}));case 8:return _context2.prev=8,_context2.t0=_context2.catch(1),_context2.abrupt("return",this.buildErrorResponse(_context2.t0));case 11:case"end":return _context2.stop()}}),_callee2,this,[[1,8]])}))),function _authorizedFetch(_x,_x2){return _authorizedFetch2.apply(this,arguments)})},{key:"_authorizedFetchWithPlainResponse",value:(_authorizedFetchWithPlainResponse2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(endpoint,method){var options,response,_args3=arguments;return _regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return options=_args3.length>2&&void 0!==_args3[2]?_args3[2]:{},_context3.prev=1,_context3.next=4,this._baseAuthorizedFetch(endpoint,method,options);case 4:return response=_context3.sent,_context3.abrupt("return",response.data.response);case 8:return _context3.prev=8,_context3.t0=_context3.catch(1),_context3.abrupt("return",this.buildErrorResponse(_context3.t0));case 11:case"end":return _context3.stop()}}),_callee3,this,[[1,8]])}))),function _authorizedFetchWithPlainResponse(_x3,_x4){return _authorizedFetchWithPlainResponse2.apply(this,arguments)})},{key:"_fetch",value:(_fetch2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(endpoint,method){var options,body,contentType,url,response,_args4=arguments;return _regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(options=_args4.length>2&&void 0!==_args4[2]?_args4[2]:{},this.url&&this.company){_context4.next=4;break}return console.error("MyParksService is missing configuration. Current configuration url: ".concat(this.url," and company: ").concat(this.company)),_context4.abrupt("return",void 0);case 4:return body=options.body?options.body:null,contentType=options.contentType?options.contentType:"application/json",url="".concat(this.url,"/").concat(endpoint),_context4.next=9,(0,axios__WEBPACK_IMPORTED_MODULE_1__.Z)({method,url,headers:{"X-Company":this.company,"X-Language":this.language,"content-type":contentType},data:body});case 9:return response=_context4.sent,_context4.abrupt("return",response.data.response);case 11:case"end":return _context4.stop()}}),_callee4,this)}))),function _fetch(_x5,_x6){return _fetch2.apply(this,arguments)})}]),MyParksService}())},"./src/stores/product-store.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _core_helpers_language_helper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/helpers/language-helper.ts"),_core_helpers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/array-helper.ts"),_core_helpers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/local-storage-helper.ts");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:String(i)}const __WEBPACK_DEFAULT_EXPORT__=new(function(){function ProductStore(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ProductStore),_defineProperty(this,"products",{}),_defineProperty(this,"initialized",!1)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ProductStore,[{key:"populateStore",value:function populateStore(products){var _this=this;(0,_core_helpers__WEBPACK_IMPORTED_MODULE_0__.Of)(products)&&!this.initialized&&(products.forEach((function(product){var _this$products,_this$products$locale,locale=product.node.node_locale;null!==(_this$products$locale=(_this$products=_this.products)[locale])&&void 0!==_this$products$locale||(_this$products[locale]=[]),_this.products[locale].push(product.node)})),this.initialized=!0)}},{key:"getProductByGlkId",value:function getProductByGlkId(glkId){var _this$products$locale2,_foundProducts$,locale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_core_helpers_language_helper__WEBPACK_IMPORTED_MODULE_1__.Z.getCurrentLocale();if(!this.initialized)return null;var foundProducts=null===(_this$products$locale2=this.products[locale])||void 0===_this$products$locale2?void 0:_this$products$locale2.filter((function(product){return product.productData&&product.productData.glkId.toString()===glkId.toString()}));if(foundProducts.length>1&&"true"===_core_helpers__WEBPACK_IMPORTED_MODULE_2__.Z.getItem("debug")){console.log("Multiple products found with same GLKID (".concat(glkId,"): ")),console.log("-----------------------------------------------");var _step,_iterator=_createForOfIteratorHelper(foundProducts);try{for(_iterator.s();!(_step=_iterator.n()).done;){var product=_step.value;console.log(product.productName+" - "+product.contentful_id)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return null!==(_foundProducts$=foundProducts[0])&&void 0!==_foundProducts$?_foundProducts$:null}},{key:"getProductsForLocale",value:function getProductsForLocale(locale){var _this$products$locale3;return this.initialized?null!==(_this$products$locale3=this.products[locale])&&void 0!==_this$products$locale3?_this$products$locale3:[]:null}}]),ProductStore}())},"./src/types/auth-types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>AuthActionTypes});var AuthActionTypes=function(AuthActionTypes){return AuthActionTypes.DEBUG="DEBUG",AuthActionTypes.SESSION_CREATED="SESSION_CREATED",AuthActionTypes.SESSION_UPDATED="SESSION_UPDATED",AuthActionTypes.SESSION_DELETED="SESSION_DELETED",AuthActionTypes.SERVER_ERROR="SERVER_ERROR",AuthActionTypes.USER_PRODUCTS_UPDATED="USER_PRODUCTS_UPDATED",AuthActionTypes.CARD_REGISTERED="CARD_REGISTERED",AuthActionTypes.CARD_BOOKING_SUCCESSFUL="CARD_BOOKING_SUCCESSFUL",AuthActionTypes.FETCH_PRODUCTS_REQUEST="FETCH_PRODUCTS_REQUEST",AuthActionTypes.FETCH_PRODUCTS_SUCCESS="FETCH_PRODUCTS_SUCCESS",AuthActionTypes.FETCH_PRODUCTS_FAILURE="FETCH_PRODUCTS_FAILURE",AuthActionTypes.FETCH_GIFTS_REQUEST="FETCH_GIFTS_REQUEST",AuthActionTypes.FETCH_GIFTS_SUCCESS="FETCH_GIFTS_SUCCESS",AuthActionTypes.FETCH_GIFTS_FAILURE="FETCH_GIFTS_FAILURE",AuthActionTypes.FETCH_CONTACTLESS_SUMMARIES_REQUEST="FETCH_CONTACTLESS_SUMMARIES_REQUEST",AuthActionTypes.FETCH_CONTACTLESS_SUMMARIES_SUCCESS="FETCH_CONTACTLESS_SUMMARIES_SUCCESS",AuthActionTypes.FETCH_CONTACTLESS_SUMMARIES_FAILURE="FETCH_CONTACTLESS_SUMMARIES_FAILURE",AuthActionTypes.FETCH_CONTACTLESS_DETAILS_REQUEST="FETCH_CONTACTLESS_DETAILS_REQUEST",AuthActionTypes.FETCH_CONTACTLESS_DETAILS_SUCCESS="FETCH_CONTACTLESS_DETAILS_SUCCESS",AuthActionTypes.FETCH_CONTACTLESS_DETAILS_FAILURE="FETCH_CONTACTLESS_DETAILS_FAILURE",AuthActionTypes.FETCH_SESSION_FAILURE="FETCH_SESSION_FAILURE",AuthActionTypes.FETCH_SESSION_REQUEST="FETCH_SESSION_REQUEST",AuthActionTypes.POST_GIFTS_SUCCESS="POST_GIFTS_SUCCESS",AuthActionTypes.CONTACTLESS_VISITORS_UPDATED="CONTACTLESS_VISITORS_UPDATED",AuthActionTypes.SET_CONTACTLESS_VISITORS="SET_CONTACTLESS_VISITORS",AuthActionTypes.SET_SAVED_PAYMENT_METHOD="SET_SAVED_PAYMENT_METHOD",AuthActionTypes}({})}}]);