"use strict";(self.webpackChunk_parksandresorts_core=self.webpackChunk_parksandresorts_core||[]).push([[6616],{"./src/components/elements/gift-card-form/gift-card-form.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>GiftCardForm});var input_field=__webpack_require__("./src/components/forms/input-field/input-field.tsx"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),parks_button=__webpack_require__("./src/components/shared-components/parks-button/parks-button.tsx"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),gift_card_form_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/postcss-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/components/elements/gift-card-form/gift-card-form.module.less"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(gift_card_form_module.Z,options);const gift_card_form_gift_card_form_module=gift_card_form_module.Z&&gift_card_form_module.Z.locals?gift_card_form_module.Z.locals:void 0;var expand_content=__webpack_require__("./src/components/elements/expand-content/expand-content.tsx"),debounce=__webpack_require__("./node_modules/lodash-es/debounce.js"),react=__webpack_require__("./node_modules/react/index.js"),input_label=__webpack_require__("./src/components/forms/input-label/input-label.tsx"),input_error=__webpack_require__("./src/components/forms/input-error/input-error.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var _excluded=["withExpanded"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var GiftCardForm=function GiftCardForm(_ref){var withExpanded=_ref.withExpanded,props=_objectWithoutProperties(_ref,_excluded),t=(0,es.$G)().t,_useState2=_slicedToArray((0,react.useState)(!1),2),expanded=_useState2[0],setExpanded=_useState2[1],onResetForm=(0,react.useCallback)((function(){return setExpanded(!1)}),[]);return(0,jsx_runtime.jsxs)("div",{className:gift_card_form_gift_card_form_module.wrapper,children:[withExpanded&&(0,jsx_runtime.jsx)(expand_content.Mv,{buttonPosition:"top",buttonType:"ghost",showMoreLabelOverride:t("useGiftCard"),showLessLabelOverride:t("close"),isExpanded:expanded,setIsExpanded:setExpanded,removeChildrenWhenUnexpanded:!0,children:(0,jsx_runtime.jsx)(Form,_objectSpread(_objectSpread({},props),{},{onResetForm}))}),!withExpanded&&(0,jsx_runtime.jsx)(Form,_objectSpread({},props))]})};GiftCardForm.displayName="GiftCardForm",GiftCardForm.displayName="GiftCardForm";var checkCardNumber=function checkCardNumber(t,value){if(8!==value.length)return t("giftCardNumberLenghtErrorMessage")},checkCode=function checkCode(t,value){if(!value)return t("inputValidationRequired")},Form=function Form(_ref2){var onSubmit=_ref2.onSubmit,onResetForm=_ref2.onResetForm,withHeading=_ref2.withHeading,_ref2$headingLevel=_ref2.headingLevel,HeadingLevel=void 0===_ref2$headingLevel?"h3":_ref2$headingLevel,disabled=_ref2.disabled,giftCardInvalid=_ref2.giftCardInvalid,acceptedGiftCardNumbers=_ref2.acceptedGiftCardNumbers,t=(0,es.$G)().t,_useState4=_slicedToArray((0,react.useState)(),2),cardNumber=_useState4[0],setCardNumber=_useState4[1],_useState6=_slicedToArray((0,react.useState)(),2),code=_useState6[0],setCode=_useState6[1],cardNumberIncludingPrefix=t("giftCardNumberPrefix")+(null!=cardNumber?cardNumber:""),_useState8=_slicedToArray((0,react.useState)(),2),cardNumberErrorText=_useState8[0],setCardNumberErrorText=_useState8[1],_useState10=_slicedToArray((0,react.useState)(),2),codeErrorText=_useState10[0],setCodeErrorText=_useState10[1],_useState12=_slicedToArray((0,react.useState)(null!=giftCardInvalid&&giftCardInvalid),2),giftCardInvalidState=_useState12[0],setGiftCardInvalid=_useState12[1],giftCardInvalidMessage=giftCardInvalidState?t("giftCardInvalid"):void 0,codeErrorMessage=null!=codeErrorText?codeErrorText:giftCardInvalidMessage;(0,react.useEffect)((function(){giftCardInvalid&&setGiftCardInvalid(giftCardInvalid)}),[giftCardInvalid]),(0,react.useEffect)((function(){setGiftCardInvalid(!1)}),[cardNumber,code]);var resetForm=(0,react.useCallback)((function(){setCardNumber(void 0),setCode(void 0),null==onResetForm||onResetForm()}),[onResetForm]);(0,react.useEffect)((function(){acceptedGiftCardNumbers&&acceptedGiftCardNumbers.includes(cardNumberIncludingPrefix)&&resetForm()}),[acceptedGiftCardNumbers,cardNumberIncludingPrefix,resetForm]);var checkCardNumberOnDebounce=(0,react.useCallback)((0,debounce.Z)((function(newValue){return setCardNumberErrorText(checkCardNumber(t,newValue))}),5e3),[]),checkCodeOnDebounce=(0,react.useCallback)((0,debounce.Z)((function(newValue){return setCodeErrorText(checkCode(t,newValue))}),5e3),[]),giftCardNumberPrefixWithSpace=t("giftCardNumberPrefix").replace(/(.{4})/g,"$1 ").trim(),isFormValid=!cardNumberErrorText&&!codeErrorText&&cardNumber&&code,submit=function submit(){var instantCardNumberErrorText=checkCardNumber(t,null!=cardNumber?cardNumber:""),instantCodeErrorText=checkCode(t,null!=code?code:"");setCardNumberErrorText(instantCardNumberErrorText),setCodeErrorText(instantCodeErrorText),!instantCardNumberErrorText&&!instantCodeErrorText&&cardNumber&&code&&onSubmit(cardNumberIncludingPrefix,code)};return(0,jsx_runtime.jsxs)("div",{className:gift_card_form_gift_card_form_module.formWrapper,"data-has-heading":withHeading,children:[withHeading&&(0,jsx_runtime.jsx)(HeadingLevel,{className:gift_card_form_gift_card_form_module.heading,children:t("giftCard")}),(0,jsx_runtime.jsxs)("div",{className:gift_card_form_gift_card_form_module.cardNumberInput,"data-has-error":!!cardNumberErrorText,children:[(0,jsx_runtime.jsx)(input_label.Z,{label:t("giftCardNumber"),inputName:"cardNumber",id:"labelForCardNumber",isRequired:!0}),(0,jsx_runtime.jsx)(input_field.Z,{value:giftCardNumberPrefixWithSpace,size:giftCardNumberPrefixWithSpace.length,className:gift_card_form_gift_card_form_module.lockedInputPrefix,icon:"lock",readOnly:!0,focus:!1,"aria-labelledby":"labelForCardNumber"}),(0,jsx_runtime.jsx)("p",{className:gift_card_form_gift_card_form_module.hyphen,children:"-"}),(0,jsx_runtime.jsx)(input_field.Z,{name:"cardNumber",placeholder:t("giftCardNumberPlaceholder"),value:function formatCodeWithSpace(value){var digits=value.replace(/\D/g,"").slice(0,8);return digits.length<=4?digits:digits.slice(0,4)+" "+digits.slice(4)}(null!=cardNumber?cardNumber:""),inputMode:"numeric",onChange:function onChange(_name,rawValue){var unformatted=rawValue.replace(/\D/g,"").slice(0,8);checkCardNumberOnDebounce(unformatted),setCardNumber(unformatted)},isValid:!0,disabled,onKeyDown:function onKeyDown(e){"Enter"===e.key&&submit()}}),(0,jsx_runtime.jsx)(input_error.Z,{errorText:cardNumberErrorText})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(input_field.Z,{name:"code",placeholder:t("giftCardCodePlaceholder"),label:t("giftCardCode"),isRequired:!0,value:code,onChange:function onChange(_name,value){checkCodeOnDebounce(value),setCode(value)},isValid:!0,disabled,onKeyDown:function onKeyDown(e){"Enter"===e.key&&submit()}}),(0,jsx_runtime.jsx)(input_error.Z,{errorText:codeErrorMessage})]}),(0,jsx_runtime.jsx)(parks_button.KM,{testId:"use-gift-card-button",label:t("use"),isDisabled:disabled||!isFormValid,isFullWidth:!0,onClick:submit})]})};Form.displayName="Form",Form.displayName="Form";try{GiftCardForm.displayName="GiftCardForm",GiftCardForm.__docgenInfo={description:"",displayName:"GiftCardForm",props:{withExpanded:{defaultValue:null,description:"",name:"withExpanded",required:!0,type:{name:"boolean"}},withHeading:{defaultValue:null,description:"",name:"withHeading",required:!0,type:{name:"boolean"}},headingLevel:{defaultValue:null,description:"",name:"headingLevel",required:!1,type:{name:"enum",value:[{value:'"h1"'},{value:'"h2"'},{value:'"h3"'},{value:'"h4"'},{value:'"h5"'},{value:'"h6"'},{value:'"span"'}]}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(cardNumber: string, code: string) => void"}},disabled:{defaultValue:null,description:"disbled can be used to prevent editing, for example when checking the validity of the gift card",name:"disabled",required:!1,type:{name:"boolean"}},giftCardInvalid:{defaultValue:null,description:"",name:"giftCardInvalid",required:!1,type:{name:"boolean"}},acceptedGiftCardNumbers:{defaultValue:null,description:"",name:"acceptedGiftCardNumbers",required:!1,type:{name:"string[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/elements/gift-card-form/gift-card-form.tsx#GiftCardForm"]={docgenInfo:GiftCardForm.__docgenInfo,name:"GiftCardForm",path:"src/components/elements/gift-card-form/gift-card-form.tsx#GiftCardForm"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/postcss-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/components/elements/gift-card-form/gift-card-form.module.less":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,'/* Breakpoints for responsive design\n   IMPORTANT! Make sure to keep these in sync with the breakpoints in ts file (used by hooks) (src\\constants\\breakpoints.ts)\n   IMPORTANT! useIsMobile() hook uses these breakpoints to determine if the device is mobile or not, make sure to update the hook if you change these breakpoints\n */\n.gift-card-form-module--wrapper--TFUtT {\n  container-type: inline-size;\n  --component-expand-content-ghost-button-font-size: var(--common-font-size-body-m);\n  --component-expand-content-margin-to-button: var(--foundation-spacing-x4);\n}\n.gift-card-form-module--form-wrapper--gZ8WJ {\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: repeat(3, auto);\n}\n.gift-card-form-module--form-wrapper--gZ8WJ .gift-card-form-module--card-number-input--_VIRF {\n  display: grid;\n  grid-template-rows: auto 1fr auto;\n  grid-template-columns: auto auto 1fr;\n  column-gap: var(--foundation-spacing-x2);\n  --component-input-field-wrapper-margin-bottom: 0;\n}\n.gift-card-form-module--form-wrapper--gZ8WJ .gift-card-form-module--card-number-input--_VIRF .gift-card-form-module--locked-input-prefix--Jy7UI {\n  width: auto;\n  --icon-color: var(--foundation-color-natural-700);\n  --icon-font-size: 20px;\n}\n.gift-card-form-module--form-wrapper--gZ8WJ .gift-card-form-module--card-number-input--_VIRF label {\n  grid-column: 1 / 4;\n}\n.gift-card-form-module--form-wrapper--gZ8WJ .gift-card-form-module--card-number-input--_VIRF .gift-card-form-module--hyphen--KBA_e {\n  margin: 0;\n  align-self: center;\n}\n.gift-card-form-module--form-wrapper--gZ8WJ .gift-card-form-module--card-number-input--_VIRF[data-has-error="true"] :last-child {\n  grid-column: 1 / 4;\n}\n.gift-card-form-module--form-wrapper--gZ8WJ[data-has-heading="true"] {\n  grid-template-rows: repeat(4, auto);\n}\n.gift-card-form-module--form-wrapper--gZ8WJ button {\n  margin-top: var(--foundation-spacing-x4);\n}\n.gift-card-form-module--form-wrapper--gZ8WJ .gift-card-form-module--heading--fHiLb {\n  margin: 0;\n  margin-bottom: var(--foundation-spacing-x2);\n}\n@container ((min-width: 48rem)) {\n  .gift-card-form-module--form-wrapper--gZ8WJ {\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: 1fr auto;\n    column-gap: var(--foundation-spacing-x4);\n  }\n  .gift-card-form-module--form-wrapper--gZ8WJ[data-has-heading="true"] {\n    grid-template-rows: auto 1fr auto;\n  }\n  .gift-card-form-module--form-wrapper--gZ8WJ[data-has-heading="true"] .gift-card-form-module--heading--fHiLb {\n    grid-column: 1 / 3;\n  }\n  .gift-card-form-module--form-wrapper--gZ8WJ .gift-card-form-module--hyphen--KBA_e {\n    height: 100%;\n  }\n  .gift-card-form-module--form-wrapper--gZ8WJ button {\n    grid-column: 1 / 3;\n  }\n}\n',"",{version:3,sources:["webpack://./src/components/elements/gift-card-form/gift-card-form.module.less"],names:[],mappings:"AAAA;;;EAGE;AADF;EACE,2BAAA;EAEA,iFAAA;EACA,yEAAA;AAEF;AACA;EACE,aAAA;EACA,0BAAA;EACA,mCAAA;AACF;AAJA;EAMI,aAAA;EACA,iCAAA;EACA,oCAAA;EACA,wCAAA;EASA,gDAAA;AAPJ;AAXA;EAYM,WAAA;EAEA,iDAAA;EACA,sBAAA;AACN;AAhBA;EAqBM,kBAAA;AAFN;AAnBA;EAyBM,SAAA;EACA,kBAAA;AAHN;AAMI;EAEI,kBAAA;AALR;AAUE;EAEE,mCAAA;AATJ;AA7BA;EA0CI,wCAAA;AAVJ;AAhCA;EA8CI,SAAA;EACA,2CAAA;AAXJ;AAcE;EAAA;IACE,8BAAA;IACA,4BAAA;IAeA,wCAAA;EAzBF;EAYE;IAEE,iCAAA;EAXJ;EASE;IAKI,kBAAA;EAXN;EAEA;IAcI,YAAA;EAbJ;EADA;IAoBI,kBAAA;EAhBJ;AACF",sourcesContent:['@import "../../../constants/breakpoints.less";\n\n.wrapper {\n  container-type: inline-size;\n\n  --component-expand-content-ghost-button-font-size: var(--common-font-size-body-m);\n  --component-expand-content-margin-to-button: var(--foundation-spacing-x4);\n}\n\n.form-wrapper {\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: repeat(3, auto);\n\n  .card-number-input {\n    display: grid;\n    grid-template-rows: auto 1fr auto;\n    grid-template-columns: auto auto 1fr;\n    column-gap: var(--foundation-spacing-x2);\n\n    .locked-input-prefix {\n      width: auto;\n\n      --icon-color: var(--foundation-color-natural-700);\n      --icon-font-size: 20px;\n    }\n\n    --component-input-field-wrapper-margin-bottom: 0;\n\n    label {\n      grid-column: 1 / 4;\n    }\n\n    .hyphen {\n      margin: 0;\n      align-self: center;\n    }\n\n    &[data-has-error="true"] {\n      :last-child {\n        grid-column: 1 / 4;\n      }\n    }\n  }\n\n  &[data-has-heading="true"] {\n    //one extra row for the heading\n    grid-template-rows: repeat(4, auto);\n  }\n\n  button {\n    margin-top: var(--foundation-spacing-x4);\n  }\n\n  .heading {\n    margin: 0;\n    margin-bottom: var(--foundation-spacing-x2);\n  }\n\n  @container (@medium) {\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: 1fr auto;\n\n    &[data-has-heading="true"] {\n      //one extra row for the heading\n      grid-template-rows: auto 1fr auto;\n\n      .heading {\n        grid-column: 1 / 3;\n      }\n    }\n\n    .hyphen {\n      height: 100%;\n    }\n\n    column-gap: var(--foundation-spacing-x4);\n\n    button {\n      grid-column: 1 / 3;\n    }\n  }\n}\n'],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={wrapper:"gift-card-form-module--wrapper--TFUtT","form-wrapper":"gift-card-form-module--form-wrapper--gZ8WJ",formWrapper:"gift-card-form-module--form-wrapper--gZ8WJ","card-number-input":"gift-card-form-module--card-number-input--_VIRF",cardNumberInput:"gift-card-form-module--card-number-input--_VIRF","locked-input-prefix":"gift-card-form-module--locked-input-prefix--Jy7UI",lockedInputPrefix:"gift-card-form-module--locked-input-prefix--Jy7UI",hyphen:"gift-card-form-module--hyphen--KBA_e",heading:"gift-card-form-module--heading--fHiLb"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);